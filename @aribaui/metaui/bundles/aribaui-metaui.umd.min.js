!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@aribaui/core"),require("typescript-collections"),require("@aribaui/components"),require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("@angular/router"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("@aribaui/metaui",["exports","@aribaui/core","typescript-collections","@aribaui/components","@angular/core","@angular/forms","@angular/common","@angular/router","@angular/platform-browser"],t):t((e.aribaui=e.aribaui||{},e.aribaui.metaui={}),e.core,e.Collections,e.components,e.ng.core,e.ng.forms,e.ng.common,e.ng.router,e.ng.platformBrowser)}(this,function(e,F,a,_,o,i,t,r,n){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function l(e,t){function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function B(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function c(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return a}var b=function(){function y(e,t,r){void 0===r&&(r=0),this._matches=e,this._keysMatchedMask=t,this._matchPathCRC=r}return y.addInt=function(e,t){if(F.isBlank(e)){var r=new Array(4);return r[0]=1,r[1]=t,r}var n=e[0];if(e[n++]===t)return e;if(n>=e.length){new Array(2*n);e=e.slice(0,n)}return e[n]=t,e[0]=n,e},y.filterMustUse=function(e,t,r){if(F.isBlank(t))return null;for(var n,i=t[0],o=0;o<i;o++){var a=t[o+1];0!=(e[a].keyMatchesMask&r)&&(n=y.addInt(n,a))}return n},y.intersect=function(e,t,r,n,i){if(F.isBlank(t))return r;var o,a=1,s=F.isPresent(t[0])?t[0]:0,l=1,c=F.isPresent(r[0])?r[0]:0;for(y._Debug_ElementProcessCount+=s+c;a<=s||l<=c;){var p=a<=s?e[t[a]].keyIndexedMask:0,u=l<=c?e[r[l]].keyIndexedMask:0,_=s<a?1:c<l?-1:t[a]-r[l];0===_?(o=y.addInt(o,t[a]),a++,l++):_<0?(0==(p&i)&&(o=y.addInt(o,t[a])),a++):(0==(u&n)&&(o=y.addInt(o,r[l])),l++)}return o},y.union=function(e,t){if(F.isBlank(e))return t;if(F.isBlank(t))return e;var r,n=e[0],i=t[0];if(0===n)return t;if(0===i)return e;y._Debug_ElementProcessCount+=n+i;for(var o=1,a=e[1],s=1,l=t[1];o<=n||s<=i;){var c=a-l;r=y.addInt(r,c<=0?a:l),c<=0&&(a=++o<=n?e[o]:Number.MAX_VALUE),0<=c&&(l=++s<=i?t[s]:Number.MAX_VALUE)}return r},y._arrayEq=function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;var r=e[0];if(r!==t[0])return!1;for(var n=1;n<=r;n++)if(e[n]!==t[n])return!1;return!0},y.prototype.filter=function(e,t,r,n,i){if(F.isBlank(r))return null;for(var o,a=r[0],s=0;s<a;s++){var l=r[s+1];if(!(t<=l)){var c=e[l];c.disabled()||0!=(c.keyAntiMask&n)||(0==(c.keyMatchesMask&~n)&&(c.keyMatchesMask===c.keyIndexedMask||F.isPresent(i)&&c.matches(i))?(!V._DebugDoubleCheckMatches||null!=i&&c.matches(i)||F.assert(!1,"Inconsistent (negative) match on rule: "+c),o=y.addInt(o,l)):V._DebugDoubleCheckMatches&&null!=i&&c.matches(i))}}return o},y.prototype.hashCode=function(){var e=31*this._keysMatchedMask+this._matchPathCRC;if(F.isPresent(this._matches))for(var t=0,r=this._matches[0];t<r;t++)e=F.crc32(e,this._matches[t+1]);return e},Object.defineProperty(y.prototype,"keysMatchedMask",{get:function(){return this._keysMatchedMask},enumerable:!0,configurable:!0}),y.prototype.equalsTo=function(e){return e instanceof y&&this._keysMatchedMask===e._keysMatchedMask&&this._matchPathCRC===e._matchPathCRC&&y._arrayEq(this._matches,e._matches)},y.prototype.toString=function(){var e=new F.StringJoiner([]);return e.add("_matches"),e.add((F.isPresent(this._matches)?this._matches.length:0)+""),e.add("_keysMatchedMask"),e.add(this._keysMatchedMask+""),e.add("_keysMatchedMask"),e.add(this._matchPathCRC+""),e.add("hashcode"),e.add(this.hashCode()+""),e.toString()},y.EmptyMatchArray=[],y._Debug_ElementProcessCount=0,y}(),p=function(o){function e(e,t,r,n){void 0===r&&(r=0);var i=o.call(this,e,t,r)||this;return i._matches=e,i._keysMatchedMask=t,i._matchPathCRC=r,i._overUnionMatch=n,i}return l(e,o),e.prototype.equalsTo=function(e){return o.prototype.equalsTo.call(this,e)&&(this._overUnionMatch===e._overUnionMatch||F.isPresent(this._overUnionMatch)&&F.isPresent(e._overUnionMatch)&&this._overUnionMatch.equalsTo(e._overUnionMatch))},e}(b),u=function(o){function t(e,t,r,n){var i=o.call(this,null,null,0,null!=n?n._overUnionMatch:null)||this;return i._meta=e,i._keyData=t,i._value=r,i._prevMatch=n,i._metaGeneration=0,i._initMatch(),i}return l(t,o),t.prototype.setOverridesMatch=function(e){this._overUnionMatch=e},t.prototype.matches=function(){return this._invalidateIfStale(),F.isBlank(this._matches)&&this._initMatch(),this._matches},t.prototype.filterResult=function(){return this.filter(this._meta._rules,this._meta._ruleCount,this.matches(),this._keysMatchedMask,null)},t.prototype.initMatchValues=function(e){F.isPresent(this._prevMatch)&&this._prevMatch.initMatchValues(e),F.isPresent(this._overUnionMatch)&&this._overUnionMatch.initMatchValues(e),this._meta.matchArrayAssign(e,this._keyData,this._keyData.matchValue(this._value))},t.prototype.filteredMatches=function(){var e,t,r=this.matches(),n=this._keysMatchedMask|(F.isPresent(this._overUnionMatch)?this._overUnionMatch._keysMatchedMask:0);return F.isPresent(this._overUnionMatch)&&F.isPresent(e=this._overUnionMatch.matches())&&(r=F.isBlank(r)?e:b.intersect(this._meta._rules,r,e,this._keysMatchedMask,this._overUnionMatch._keysMatchedMask)),V._UsePartialIndexing&&(t=this._meta.newMatchArray(),this.initMatchValues(t)),this.filter(this._meta._rules,this._meta._ruleCount,r,n,t)},t.prototype.valueForKey=function(e){return this._keyData._key===e?this._value:F.isPresent(this._prevMatch)?this._prevMatch.valueForKey(e):null},t.prototype.immutableCopy=function(){return this._invalidateIfStale(),new p(this.matches(),this._keysMatchedMask,this._matchPathCRC,this._overUnionMatch)},t.prototype._invalidateIfStale=function(){this._metaGeneration<this._meta.ruleSetGeneration&&this._initMatch()},t.prototype.join=function(e,t,r,n){return b.intersect(this._meta._rules,e,t,r,n)},t.prototype._initMatch=function(){var e,t=F.shiftLeft(1,this._keyData._id);if(F.isArray(this._value))try{for(var r=B(this._value),n=r.next();!n.done;n=r.next()){var i=n.value,o=this._keyData.lookup(this._meta,i);e=b.union(o,e)}}catch(u){a={error:u}}finally{try{n&&!n.done&&(s=r["return"])&&s.call(r)}finally{if(a)throw a.error}}else e=this._keyData.lookup(this._meta,this._value);var a,s,l=F.isBlank(this._prevMatch)?null:this._prevMatch.matches();this._keysMatchedMask=F.isBlank(this._prevMatch)?t:t|this._prevMatch._keysMatchedMask,F.isBlank(l)?(this._matches=e,V._UsePartialIndexing||(this._keysMatchedMask=t)):(F.isBlank(e)&&(e=b.EmptyMatchArray),this._matches=this.join(e,l,t,this._prevMatch._keysMatchedMask)),this._matchPathCRC=-1;for(var c=this;null!=c;c=c._prevMatch)if(this._matchPathCRC=F.crc32(this._matchPathCRC,c._keyData._key.length),F.isPresent(c._value)){var p=F.isArray(c._value)?c._value.join(","):c._value;this._matchPathCRC=F.crc32(this._matchPathCRC,F.hashCode(p))}0===this._matchPathCRC&&(this._matchPathCRC=1),this._metaGeneration=this._meta.ruleSetGeneration,this._properties=null},t.prototype._logMatchDiff=function(e,t){for(var r=1,n=e[0],i=1,o=t[0];r<=n||i<=o;){var a=n<r?1:o<i?-1:e[r]-t[i];0===a?(r++,i++):a<0?(F.print("  -- Only in A: "+this._meta._rules[e[r]]),r++):(F.print("  -- Only in B: "+this._meta._rules[t[i]]),i++)}},t.prototype.properties=function(){return this._invalidateIfStale(),F.isBlank(this._properties)&&(this._properties=this._meta.propertiesForMatch(this)),this._properties},t.prototype.debugString=function(){var e=new F.StringJoiner(["Match Result path: \n"]);return this._appendPrevPath(e),F.isPresent(this._overUnionMatch)&&(e.add("\nOverrides path: "),this._overUnionMatch._appendPrevPath(e)),e.toString()},t.prototype._appendPrevPath=function(e){F.isPresent(this._prevMatch)&&(this._prevMatch._appendPrevPath(e),e.add(" -> ")),e.add(this._keyData._key),e.add("="),e.add(this._value)},t.prototype._checkMatch=function(e,t){var r=this.filterResult();if(!F.isBlank(r))for(var n=r[0],i=0;i<n;i++){this._meta._rules[r[i+1]]._checkRule(e,t)}},t.prototype.equalsTo=function(e){return e instanceof t&&o.prototype.equalsTo.call(this,e)&&e._metaGeneration===this._metaGeneration&&e._properties.size===this._properties.size},t}(p),y=function(i){function e(e,t,r,n){return i.call(this,e,t,r,n)||this}return l(e,i),e.prototype.join=function(e,t,r,n){return b.union(e,t)},e}(u),h=function(){function i(e,t){this._parent=e,this._map=t,this._overrideCount=0,this._size=0,F.isBlank(t)&&(this._map=new Map)}return i.toMapEntry=function(e){var t=e.value;return F.isPresent(t)&&i.isMapEntry(t)?t:{key:F.isPresent(e.value)?e.value[0]:e.value,value:F.isPresent(e.value)?e.value[1]:e.value,hasNext:!e.done}},i.isMapEntry=function(e){return F.isPresent(e)&&F.isPresent(e.hasNext)},i.isNMNullMarker=function(e){return F.isPresent(e)&&e.nesnullmarker},i.prototype.toMap=function(){return this._parent},i.prototype.reparentedMap=function(e){var t=new i(e,this._map);return t._overrideCount=this._overrideCount,t},i.prototype.get=function(e){var t=this._map.has(e)?this._map.get(e):this._parent.get(e);return i.isNMNullMarker(t)?null:t},i.prototype.keys=function(){return F.unimplemented()},i.prototype.values=function(){return F.unimplemented()},i.prototype.clear=function(){this._parent.clear(),this._map.clear()},i.prototype.set=function(e,t){var r=this._map.get(e);return(i.isNMNullMarker(r)||F.isBlank(r))&&this._parent.has(e)&&(this._overrideCount+=i.isNMNullMarker(r)?-1:1),this._map.set(e,t),this},i.prototype["delete"]=function(e){var t=!1;return this._map.has(e)?(this._map["delete"](e),t=!0,this._parent.has(e)&&(this._map.set(e,i._NullMarker),this._overrideCount++)):this._parent.has(e)&&(this._parent.get(e),this._map.set(e,i._NullMarker),this._overrideCount+=2),t},i.prototype.forEach=function(e,t){for(var r,n=this.entries();(r=i.toMapEntry(n.next()))&&r.hasNext;)e(r.value,r.key,this._parent)},i.prototype.has=function(e){return this._map.has(e)?!i.isNMNullMarker(this._map.get(e)):this._parent.has(e)},i.prototype[Symbol.iterator]=function(){return new d(this)},i.prototype.entries=function(){return new d(this)},Object.defineProperty(i.prototype,"size",{get:function(){return this._parent.size+this._map.size-this._overrideCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),i.prototype.toString=function(){return"NestedMap"},i._NullMarker={nesnullmarker:!0},i}(),d=function(){function e(e){this._nestedMap=e,this._parentIterator=e.parent.entries(),this._nestedIterator=e.map.entries(),this.advanceToNext()}return e.prototype.next=function(){return this._currentEntry=this._nextEntry,this.advanceToNext(),{value:this._currentEntry,done:!this._currentEntry.hasNext}},e.prototype[Symbol.iterator]=function(){return this},e.prototype.advanceToNext=function(){for(this._fromNested=!1;!this._fromNested&&(this._currentNestedEntry=h.toMapEntry(this._nestedIterator.next()))&&this._currentNestedEntry.hasNext;)this._nextEntry=this._currentNestedEntry,h.isNMNullMarker(this._nextEntry.value)||(this._fromNested=!0);if(!this._fromNested){for(;(this._currentParentEntry=h.toMapEntry(this._parentIterator.next()))&&this._currentParentEntry.hasNext;)if(this._nextEntry=this._currentParentEntry,!this._nestedMap.map.has(this._nextEntry.key))return;this._nextEntry=this._currentParentEntry}},e}(),v=function(){function e(){}return e.prototype.evaluate=function(e){return F.unimplemented()},e.prototype.bind=function(e){return F.unimplemented()},e}(),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t}(v),k=function(r){function t(e){var t=r.call(this)||this;return t._orig=e,t.propertyAwaking=!0,t}return l(t,r),t.prototype.getDynamicValue=function(){return this._orig},t.prototype.awakeForPropertyMap=function(e){return new t(ie(this._orig)?this._orig.awakeForPropertyMap(e):this._orig)},t.prototype.evaluate=function(e){return F.isBlank(this._cached)&&(this._cached=e.staticallyResolveValue(this._orig)),this._cached},t.prototype.toString=function(){var e=new F.StringJoiner(["StaticDynamicWrapper"]);return e.add("("),e.add(F.isPresent(this._cached)?this._cached:this._orig),e.add(F.isBlank(this._cached)?" unevaluated":""),e.add(")"),e.toString()},t}(f),m=function(r){function e(e){var t=r.call(this)||this;return t._orig=e,t}return l(e,r),e.prototype.evaluate=function(e){return this._orig.evaluate(e)},e.prototype.toString=function(){var e=new F.StringJoiner(["StaticallyResolvableWrapper"]);return e.add("("),e.add(this._orig.toString()),e.add(")"),e.toString()},e}(f),g=function(r){function e(e){var t=r.call(this)||this;return t.settable=!0,t.fieldPath=new F.FieldPath(e),t}return l(e,r),e.prototype.evaluate=function(e){return this.fieldPath.getFieldValue(e)},e.prototype.evaluateSet=function(e,t){this.fieldPath.setFieldValue(e,t)},e}(v);function D(e){return F.isPresent(e.settable)}var C=function(r){function e(e){var t=r.call(this)||this;return t._expressionString=e,t._extendedObjects=new Map,t.addTypeToContext("Meta",V),t.addTypeToContext("FieldPath",F.FieldPath),t}return l(e,r),e.prototype.addTypeToContext=function(e,t){F.isFunction(t)&&this._extendedObjects.set(e,t)},e.prototype.evaluate=function(n){var i=this,o=0;this._extendedObjects.forEach(function(e,t){var r="DynObj"+o++;n[r]=e,-1!==i._expressionString.indexOf(t+".")&&(i._expressionString=i._expressionString.replace(t+".",r+"."))});var e=F.evalExpressionWithCntx(this._expressionString,"",n,n);return o=0,this._extendedObjects.forEach(function(e,t){var r="DynObj"+o++;F.isPresent(n[r])&&delete n[r]}),e},e.prototype.toString=function(){var e=new F.StringJoiner(["expr:"]);return e.add("("),e.add(this._expressionString),e.add(")"),e.toString()},e}(v),P=function(i){function n(e,t,r){var n=i.call(this)||this;return n._merger=e,n._orig=t,n._override=r,n.propertyAwaking=!0,n}return l(n,i),n.prototype.evaluate=function(e){return this._merger.merge(e.resolveValue(this._override),e.resolveValue(this._orig),e.isDeclare())},n.prototype.awakeForPropertyMap=function(e){var t=this._orig,r=this._override;return ie(t)&&(t=t.awakeForPropertyMap(e)),ie(r)&&(r=r.awakeForPropertyMap(e)),t!==this._orig||r!==this._override?new n(this._merger,t,r):this},n.prototype.toString=function(){var e=new F.StringJoiner(["Chain"]);return e.add("<"),e.add(this._merger.toString()),e.add(">"),e.add(": "),e.add(this._override),e.add(" => "),e.add(this._orig),e.toString()},n}(v),x=function(){function e(){}return e.value=function(e,t){return"String"===e?F.isBlank(t)||F.isString(t)?t:t.toString():"Boolean"===e?F.isBlank(t)||F.isBoolean(t)?t:F.BooleanWrapper.boleanValue(t):"Number"===e?F.isBlank(t)||F.isNumber(t)?t:parseInt(t.toString()):t},e}(),M=function(n){function k(e,t){void 0===t&&(t=!1);var r=n.call(this)||this;return r._meta=e,r.nested=t,r._values=new Map,r._entries=[],r._frameStarts=[],r._recPool=[],F.isBlank(k.EmptyMap)&&(k.EmptyMap=new U),k._Debug_SetsCount=0,r._accessor=new L(r),r._currentActivation=k.getActivationTree(e),r._rootNode=r._currentActivation,r.isNested=t,r}return l(k,n),k.getActivationTree=function(e){var t=F.objectToName(S),r=e.identityCache.getValue(t);return F.isBlank(r)&&(r=new S,e.identityCache.setValue(t,r)),r},k.prototype.push=function(){this._frameStarts.push(this._entries.length)},Object.defineProperty(k.prototype,"meta",{get:function(){return this._meta},enumerable:!0,configurable:!0}),k.prototype.pop=function(){var e=this._frameStarts.length;F.assert(0<e,"Popping empty stack");for(var t,r=this._frameStarts.pop();(t=this._entries.length)>r;){var n=t-1,i=this._entries.splice(n,1)[0];-1===i.srec.lastAssignmentIdx?this._values["delete"](i.srec.key):this._undoOverride(i,n),this._currentActivation=0<n?this._entries[n-1].srec.activation:this._rootNode,this.assertContextConsistent(),i.reset(),this._recPool.push(i)}this._currentProperties=null},k.prototype.set=function(e,t){var r=this;if(this._set(e,t,!1,!1),e===ae.KeyObject){var n=this._values.get(ae.KeyObject);F.isBlank(n.$toString)&&(n.$toString=function(){var e=r.values.get(ae.KeyClass);return ye.beautifyClassName(e)})}},k.prototype.merge=function(e,t){this._set(e,t,!0,!1)},k.prototype.setScopeKey=function(e){if(F.assert(this._meta.keyData(e).isPropertyScope,e+" is not a valid context key"),e!==this._currentPropertyScopeKey()){var t=this.values.get(e);F.isBlank(t)&&(t=V.KeyAny),this.set(e,t)}},Object.defineProperty(k.prototype,"values",{get:function(){var e;return F.ListWrapper.isEmpty(this._entries)||F.isBlank(e=F.ListWrapper.last(this._entries).propertyLocalValues(this))?this._values:e},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"properties",{get:function(){return this._accessor},enumerable:!0,configurable:!0}),k.prototype.propertyForKey=function(e){var t=this.allProperties().get(e);return this.resolveValue(t)},k.prototype.listPropertyForKey=function(e){var t=this.propertyForKey(e);return F.isBlank(t)?[]:F.isArray(t)?t:[t]},k.prototype.booleanPropertyForKey=function(e,t){var r=this.propertyForKey(e);return F.isBlank(r)?t:F.BooleanWrapper.boleanValue(r)},k.prototype.allProperties=function(){if(F.isBlank(this._currentProperties)){var e=this.lastMatch();F.isPresent(e)&&(this._currentProperties=e.properties())}return F.isPresent(this._currentProperties)?this._currentProperties:k.EmptyMap},k.prototype.resolveValue=function(e){for(var t;e!==t&&F.isPresent(e)&&e instanceof v;){var r=t=e;r instanceof C&&r.addTypeToContext("UIMeta",ye),e=r.evaluate(this)}return e},k.prototype.staticallyResolveValue=function(e){for(var t=null;e!==t&&F.isPresent(e)&&e instanceof f;)e=(t=e).evaluate(this);return e},k.prototype.pushAndResolveStatic=function(e,t,r){var n,i=this;this.push(),F.MapWrapper.iterable(e).forEach(function(e,t){"*"===e?n=t:i.set(t,e)}),F.isPresent(n)&&this.setScopeKey(n);var o=this.allProperties().get(t);return o=r?this.staticallyResolveValue(o):this.resolveValue(o),this.pop(),o},k.prototype.pushAndResolve=function(e,t){return this.pushAndResolveStatic(e,t,!1)},k.prototype.snapshot=function(){return new I(this)},k.prototype.activeAssignments=function(){for(var e=new Array,t=0,r=this._entries.length;t<r;t++){var n=this._entries[t];if(0===n.maskedByIdx&&!n.srec.fromChaining){var i=new A;i.key=n.srec.key,i.value=n.val,i.salience=n.srec.salience,e.push(i)}}return e},k.prototype.allAssignments=function(){for(var e=new Array,t=0,r=this._entries.length;t<r;t++){var n=this._entries[t];if(!n.srec.fromChaining){var i=new A;i.key=n.srec.key,i.value=n.val,i.salience=n.srec.salience,e.push(i)}}return e},k.prototype._set=function(e,t,r,n){var i=this._meta.transformValue(e,t),o=!1,a=this.meta.componentRegistry;e===ae.KeyObject&&F.isPresent(a)&&a.registerType(F.className(t),t.constructor);var s=this._currentActivation.getChildActivation(e,i,n);F.isBlank(s)&&(o=this._createNewFrameForSet(e,i,t,r,n)),F.isPresent(s)&&(o=this._applyActivation(s,t)),o&&this.awakeCurrentActivation()},k.prototype.newContextRec=function(){var e=this._recPool.length;return 0<e?this._recPool.splice(e-1,1)[0]:new K},k.prototype._applyActivation=function(e,t){F.assert(e._parent===this._currentActivation,"Attempt to apply activation on mismatched parent"),this._entries.length!==e._origEntryCount&&F.assert(!1,"Mismatched context stack size (%s) from when activation was popped "+this._entries.length+" "+e._origEntryCount);var r=e._recs.length;if(0===r)return!1;for(var n=0;n<r;n++){var i=e._recs[n],o=this.newContextRec();-1!==(o.srec=i).lastAssignmentIdx&&this._prepareForOverride(this._entries.length,i.lastAssignmentIdx),o.val=0!==n||this.meta.isNullMarker(t)?i.val:t,this._values.set(i.key,o.val),this._entries.push(o)}return this._currentActivation=e,!(this._currentProperties=null)},k.prototype.awakeCurrentActivation=function(){var e=this._currentActivation.deferredAssignments;F.isPresent(e)&&this.applyDeferredAssignments(e)},k.prototype.applyDeferredAssignments=function(e){try{for(var t=B(e),r=t.next();!r.done;r=t.next()){var n=r.value,i=this.staticallyResolveValue(this.allProperties().get(n.key));if(n.value===i){var o=this.resolveValue(n.value);this._set(n.key,o,!1,!0)}}}catch(l){a={error:l}}finally{try{r&&!r.done&&(s=t["return"])&&s.call(t)}finally{if(a)throw a.error}}var a,s},k.prototype._inDeclare=function(){var e=this.lastMatchWithoutContextProps();return F.isPresent(e)&&0!=(e._keysMatchedMask&this._meta.declareKeyMask)},k.prototype._createNewFrameForSet=function(e,t,r,n,i){var o=this._currentActivation,a=new S(o);a._origEntryCount=this._entries.length,this._currentActivation=a;var s=this._set2(e,t,r,n,i);if(s)for(;this._checkApplyProperties(););return k._CacheActivations&&o.cacheChildActivation(e,t,a,i),this._currentActivation=s?a:o,this._currentActivation!==o},k.prototype._createNewPropertyContextActivation=function(e){this.push();var t=new S(e);t._origEntryCount=this._entries.length,this._currentActivation=t;var r=this._values,n=new h(r);return this._values=n,this.applyPropertyContextAndChain(),0<t._recs.length||F.isPresent(t.deferredAssignments)?(t._nestedValues=n,this._values=k.EmptyRemoveMap):t=null,this.pop(),this._values=r,this._currentActivation=e,t},k.prototype._applyPropertyActivation=function(e,t){var r=this._values;if(F.isPresent(e._nestedValues)&&(r=e._nestedValues.reparentedMap(r)),F.isPresent(e.deferredAssignments)){this.push();var n=this._values;this._values=new h(r),this._applyActivation(e,V.NullMarker),this.applyDeferredAssignments(e.deferredAssignments),t._propertyLocalValues=this._values,t._propertyLocalSrec=F.ListWrapper.last(this._entries).srec,this._values=k.EmptyRemoveMap,this.pop(),this._values=n}else t._propertyLocalValues=r,t._propertyLocalSrec=F.ListWrapper.last(e._recs)},k.prototype._isNewValue=function(e,t){return e!==t&&(F.isPresent(e)||!e===t&&!F.isArray(e)||!F.ListWrapper.contains(e,t))},k.prototype.isDeclare=function(){return F.isPresent(this.propertyForKey(V.KeyDeclare))},k.prototype.assertContextConsistent=function(){var i=this;if(k._ExpensiveContextConsistencyChecksEnabled){F.MapWrapper.iterable(this._values).forEach(function(e,t){var r=i.findLastAssignmentOfKey(t);F.assert(0<=r,"Value in context but no assignment record found "+t+" = "+e);var n=i._entries[r].val;F.assert(e===n||F.isPresent(e)&&e===n,"Value in context  doesnt match value on stack "+e+" / "+n)});for(var e=this._entries.length-1;0<=e;e--)for(var t=this._entries[e],r=!1,n=e-1;0<=n;n--){var o=this._entries[n];o.srec.key===t.srec.key&&(F.assert(!r&&o.maskedByIdx===e||(r||o.srec.fromChaining)&&0<o.maskedByIdx,"Predecessor A does not have matching maskedByIdx B  for override C:"+o.srec.key+" = "+o.val+", "+o.maskedByIdx+", "+e+" = "+t.val),F.assert(!r&&t.srec.lastAssignmentIdx===n||r||o.srec.fromChaining,"Override A1=A2 does not have proper lastAssignmentIdx B1!=B2 for predecessor C"+o.srec.key+" = "+o.val+", "+t.srec.lastAssignmentIdx+" = "+n+", "+o.val),r=!0)}}},k.prototype._set2=function(e,t,r,n,i){k._Debug_SetsCount++;var o=this._values.has(e)&&F.isPresent(this._values.get(e)),a=o?this._values.get(e):null,s=!o||this._isNewValue(a,r),l=!s&&!i&&this._meta.keyData(e).isPropertyScope&&e!==this._currentPropertyScopeKey();if(s||l){var c=void 0,p=void 0,u=this._frameStarts.length,_=-1;if(F.isBlank(a))c=this.lastMatchWithoutContextProps();else{var y=this._entries.length;if(_=this.findLastAssignmentOfKey(e),F.assert(0<=_,"Value in context but no assignment record found "+e+" = "+a),l)this._entries[_].maskedByIdx=y,c=this.lastMatchWithoutContextProps();else{var h=this._entries[_];if(h.srec.salience===u){var d=this.findLastAssignmentOfKeyWithValue(e,r);if(-1!==d&&this._entries[d].srec.salience===u)return!1}if(i&&(h.srec.salience>u||!h.srec.fromChaining))return!1;var v=this._prepareForOverride(y,_);p=this._rematchForOverride(e,t,y,v),n&&(r=V.PropertyMerger_List.merge(a,r,this.isDeclare()))}}F.assert(this._entries.length<=k.MaxContextStackSize,"MetaUI context stack exceeded max size -- likely infinite chaining: "+this._entries.length);var f=new R;f.key=e,f.val=t,f.lastAssignmentIdx=_,f.salience=u,f.fromChaining=i,F.isBlank(p)&&(p=F.isPresent(r)?this._meta.match(e,t,c):c),f.match=p,f.activation=this._currentActivation,this._currentActivation._recs.push(f);var m=this.newContextRec();return m.srec=f,m.val=r,this._entries.push(m),this._currentProperties=null,this._values.set(e,r),k._DebugRuleMatches&&this._checkMatch(f.match,e,r),this.assertContextConsistent(),!0}return!i&&this.meta.keyData(e).isPropertyScope,!1},Object.defineProperty(k.prototype,"frameStarts",{get:function(){return this._frameStarts},enumerable:!0,configurable:!0}),k.prototype._undoRecValue=function(e){-1===e.srec.lastAssignmentIdx||0<this._entries[e.srec.lastAssignmentIdx].maskedByIdx?this._values["delete"](e.srec.key):this._values.set(e.srec.key,this._entries[e.srec.lastAssignmentIdx].val)},k.prototype._prepareForOverride=function(e,t){for(var r=0;-1!==(r=this._entries[t].srec.lastAssignmentIdx)&&this._entries[t].maskedByIdx<=0;)this._entries[t].maskedByIdx=-1,t=r;for(var n=this._entries.length-1;t<=n;n--){var i=this._entries[n];i.maskedByIdx<=0&&(n===t||-1===i.maskedByIdx)&&(i.maskedByIdx=e,this._undoRecValue(i))}return t},k.prototype._rematchForOverride=function(e,t,r,n){for(var i,o,a=0;a<n;a++){var s=this._entries[a];if(0!==s.maskedByIdx)break;i=s.srec.match}for(var l=this._entries.length;a<l;a++){var c=this._entries[a];0===c.maskedByIdx?i=this._meta.match(c.srec.key,c.srec.val,i):o=this._meta.unionOverrideMatch(c.srec.key,c.srec.val,o)}return(F.isPresent(t)||F.isBlank(i))&&(i=this._meta.match(e,t,i)),i.setOverridesMatch(o),i},k.prototype._undoOverride=function(e,t){for(var r,n=e.srec.lastAssignmentIdx;-1!==(r=this._entries[n].srec.lastAssignmentIdx)&&this._entries[r].maskedByIdx===t;)n=r;for(var i=n,o=this._entries.length;i<o;i++){var a=this._entries[i];a.maskedByIdx===t&&(this._values.set(a.srec.key,a.val),a.maskedByIdx=0)}},k.prototype._checkMatch=function(e,t,r){e._checkMatch(this._values,this._meta)},k.prototype.findLastAssignmentOfKey=function(e){for(var t=this._entries.length-1;0<=t;t--){var r=this._entries[t];if(r.srec.key===e&&0===r.maskedByIdx)return t}return-1},k.prototype.findLastAssignmentOfKeyWithValue=function(e,t){for(var r=this._entries.length-1;0<=r;r--){var n=this._entries[r];if(n.srec.key===e&&!this._isNewValue(n.val,t))return r}return-1},k.prototype._checkApplyProperties=function(){for(var e=!1,t=0,r=0,n=this._inDeclare()?this._values.get(V.KeyDeclare):null;(t=this._entries.length)>r;){r=t;var i=this._entries[t-1].srec.properties(),o=i.contextKeysUpdated;if(F.isPresent(o))for(var a=0,s=o.length;a<s;a++){var l=o[a],c=l._name;if(!F.isPresent(n)||c!==n){var p=this.staticallyResolveValue(i.get(c)),u=void 0;if(!(F.isPresent(u)&&u.has(c)&&!this._isNewValue(this.staticallyResolveValue(u.get(c)),p)||this._currentActivation._parent.hasDeferredAssignmentForKey(c))){var _=l._keyDataToSet._key;p instanceof v?this._currentActivation.addDeferredAssignment(_,p):this._set2(_,p,p,!1,!0)&&(e=!0)}}}}return e},k.prototype.applyPropertyContextAndChain=function(){if(this._checkPropertyContext())for(;this._checkApplyProperties(););},k.prototype._currentPropertyScopeKey=function(){for(var e,t=this._entries.length-1;0<=t;t--){var r=this._entries[t];if(F.isPresent(e)&&r.srec.activation!==e)break;if(this._meta.keyData(r.srec.key).isPropertyScope&&!r.srec.fromChaining)return r.srec.key;F.isPresent(void 0)&&!r.srec.fromChaining&&(e=r.srec.activation)}},k.prototype._checkPropertyContext=function(){F.assert(this._values instanceof h,"Property assignment on base map?");var e=this._currentPropertyScopeKey();return!!F.isPresent(e)&&this._set2(V.ScopeKey,e,e,!1,!1)},k.prototype.debug=function(){F.print("******  Debug Call ******"),this._logContext()},k.prototype.debugString=function(){var e=new F.StringJoiner(["<b>Context:</b>&nbsp;"]);e.add("(&nbsp;"),e.add(this._entries.length+""),e.add(" entries"),e.add("&nbsp;)<br/>");for(var t=0,r=this._entries.length;t<r;t++){for(var n=t;0<n--;)e.add("&nbsp;");var i=this._entries[t];e.add("&nbsp;"),e.add(i.srec.key),e.add("&nbsp;&nbsp;:&nbsp;"),e.add(i.srec.val),e.add(i.srec.fromChaining?" ^":""),e.add(0!==i.maskedByIdx?" X":""),e.add("<br/>")}var o=this.currentActivation._propertyActivation;if(F.isPresent(o)){var a=o._recs;e.add("&nbsp;&nbsp;&nbsp;<b>PropertyActivation...</b><br/>");for(t=0,r=a.length;t<r;t++){for(n=t+this._entries.length+1;0<n--;)e.add("&nbsp;&nbsp;");i=a[t];e.add(i.key),e.add("&nbsp;&nbsp;:&nbsp;"),e.add(i.val),e.add(i.fromChaining?"&nbsp;&nbsp;":"&nbsp;&nbsp;!"),e.add("<br/>")}}return e.add("&nbsp;<br/><b>Props:</b><br/>"),this.writeProperties(e,this.allProperties(),1,!1),e.toString()},k.prototype._logContext=function(){var e=this.debugString();F.print(e),F.print("\n")},k.prototype.writeProperties=function(r,e,n,i){F.MapWrapper.iterable(e).forEach(function(e,t){if(!i)for(;0<n--;)r.add("&nbsp;&nbsp;&nbsp;");F.isBlank(e)?(r.add(t),r.add(" :null"),r.add(i?";&nbsp;&nbsp;":";<br/>")):(r.add("&nbsp;&nbsp;&nbsp;"),r.add(t),r.add(":"),F.isString(e)||F.isNumber(e)?(r.add("&nbsp;&nbsp;"),r.add(e),r.add("&nbsp;&nbsp;")):F.isStringMap(e)?(r.add("{"),r.add(e),r.add("}")):e instanceof C?r.add(e.toString()):e instanceof Map?r.add(F.MapWrapper.toString(e)):F.isArray(e)?F.ListWrapper.toString(e):e instanceof G?r.add(e.toString()):e instanceof F.FieldPath&&(r.add("$"),r.add(e.toString())),i?r.add(";"):r.add("<br/>"))})},k.prototype.lastMatchWithoutContextProps=function(){return F.ListWrapper.isEmpty(this._entries)?null:this._entries[this._entries.length-1].srec.match},k.prototype.lastMatch=function(){if(F.ListWrapper.isEmpty(this._entries))return null;var e=F.ListWrapper.last(this._entries).propertyLocalMatches(this);return F.isPresent(e)?e:this.lastMatchWithoutContextProps()},k.prototype.lastStaticRec=function(){if(F.ListWrapper.isEmpty(this._entries))return null;var e=F.ListWrapper.last(this._entries).propertyLocalStaticRec(this);return F.isPresent(e)?e:F.ListWrapper.last(this._entries).srec},Object.defineProperty(k.prototype,"recPool",{get:function(){return this._recPool},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"currentActivation",{get:function(){return this._currentActivation},enumerable:!0,configurable:!0}),k.prototype.extendedFields=function(){return this.values},k._CacheActivations=!1,k._ExpensiveContextConsistencyChecksEnabled=!1,k._DebugRuleMatches=!1,k._Debug_SetsCount=0,k.MaxContextStackSize=200,k.EmptyMap=null,k.EmptyRemoveMap=new Map,k}(F.Extensible),S=function(){function e(e){this._parent=e,this._recs=new Array,this._origEntryCount=0}return e.prototype.getChildActivation=function(e,t,r){F.isBlank(t)&&(t=V.NullMarker);var n=r?this._valueNodeMapByContextKeyChaining:this._valueNodeMapByContextKey;if(F.isBlank(n))return null;var i=n.get(e);return F.isBlank(i)?null:i.getValue(t)},e.prototype.cacheChildActivation=function(e,t,r,n){var i;F.isBlank(t)&&(t=V.NullMarker),n?F.isBlank(i=this._valueNodeMapByContextKeyChaining)&&(i=this._valueNodeMapByContextKeyChaining=new Map):F.isBlank(i=this._valueNodeMapByContextKey)&&(i=this._valueNodeMapByContextKey=new Map);var o=i.get(e);F.isBlank(o)&&(o=new a.Dictionary,i.set(e,o)),o.setValue(t,r)},e.prototype.addDeferredAssignment=function(e,t){var r,n,i;if(F.isBlank(this.deferredAssignments))this.deferredAssignments=new Array;else try{for(var o=B(this.deferredAssignments),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.key===e){r=s;break}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o["return"])&&i.call(o)}finally{if(n)throw n.error}}F.isBlank(r)&&((r=new w).key=e,this.deferredAssignments.push(r)),r.value=t},e.prototype.hasDeferredAssignmentForKey=function(e){if(F.isPresent(this.deferredAssignments))try{for(var t=B(this.deferredAssignments),r=t.next();!r.done;r=t.next()){if(r.value.key===e)return!0}}catch(o){n={error:o}}finally{try{r&&!r.done&&(i=t["return"])&&i.call(t)}finally{if(n)throw n.error}}return!1;var n,i},e.prototype.propertyActivation=function(e){return F.assert(e.currentActivation===this,"PropertyActivation sought on non top of stack activation"),F.isBlank(this._propertyActivation)&&(this._propertyActivation=e._createNewPropertyContextActivation(this),F.isBlank(this._propertyActivation)&&(this._propertyActivation=this)),this._propertyActivation!==this?this._propertyActivation:null},e.prototype.findExistingPropertyActivation=function(){for(var e=this;F.isPresent(e);){var t=e._propertyActivation;if(F.isPresent(t)&&t!==e&&!F.isBlank(t._recs)&&!F.ListWrapper.isEmpty(t._recs))return t;e=e._parent}return null},e.prototype.toString=function(){return a.util.makeString(this)},e}(),w=function Je(){},A=function Xe(){},K=function(){function e(){this.maskedByIdx=0,this._didInitPropContext=!1}return e.prototype.propertyLocalMatches=function(e){return this._didInitPropContext||this.initPropContext(e),F.isPresent(this._propertyLocalSrec)?this._propertyLocalSrec.match:null},e.prototype.propertyLocalStaticRec=function(e){return this._didInitPropContext||this.initPropContext(e),this._propertyLocalSrec},e.prototype.propertyLocalValues=function(e){return this._didInitPropContext||this.initPropContext(e),this._propertyLocalValues},e.prototype.initPropContext=function(e){this._didInitPropContext=!0,F.assert(!M._ExpensiveContextConsistencyChecksEnabled||F.ListWrapper.last(e._entries)===this,"initing prop context on record not on top of stack");var t=this.srec.activation.propertyActivation(e);F.isPresent(t)&&e._applyPropertyActivation(t,this)},e.prototype.reset=function(){this.srec=null,this.val=null,this.maskedByIdx=0,this._didInitPropContext=!1,this._propertyLocalSrec=null,this._propertyLocalValues=null},e}(),R=function(){function e(){this.salience=0,this.lastAssignmentIdx=0}return e.prototype.properties=function(){return F.isPresent(this.match)?this.match.properties():M.EmptyMap},Object.defineProperty(e.prototype,"key",{get:function(){return this._key},set:function(e){this._key=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"val",{get:function(){return this._val},set:function(e){this._val=e},enumerable:!0,configurable:!0}),e}(),L=function(){function e(e){this.context=e}return e.prototype.get=function(e){return this.context.propertyForKey(e)},e.prototype.toString=function(){return F.MapWrapper.toString(this.context.allProperties())},e}(),I=function(){function e(e){this._context=e,this._meta=e.meta,this._origClass=e.constructor.name,this._assignments=e.activeAssignments(),this._allAssignments=e.allAssignments(),this._isNested=e.isNested}return e.prototype.hydrate=function(e){void 0===e&&(e=!0);var t=e?this._assignments:this._allAssignments,r=this._meta.newContext();r.push();var n,i;try{for(var o=B(t),a=o.next();!a.done;a=o.next()){var s=a.value;1<s.salience&&r.push(),r.set(s.key,s.value)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o["return"])&&i.call(o)}finally{if(n)throw n.error}}return r.isNested=this._isNested,r},e}(),E=function(r){function e(e,t){return void 0===t&&(t=!1),r.call(this,e,t)||this}return l(e,r),Object.defineProperty(e.prototype,"value",{get:function(){var e=this.object;if(F.isBlank(e))return null;var t=this.fieldPath();return F.isPresent(t)?t.getFieldValue(e):this.propertyForKey("value")},set:function(e){var t=this.fieldPath();if(F.isPresent(t))F.assert(F.isPresent(this.object),"Call to setValue() with no current object"),t.setFieldValue(this.object,e);else{var r=this.allProperties().get(ae.KeyValue);F.assert(D(r),"Cant set derived property: "+r);var n=r;r.evaluateSet(this,e),n.evaluateSet(this,e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"object",{get:function(){return this.values.get(ae.KeyObject)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatters",{get:function(){return F.isBlank(this._formatters)&&(this._formatters=new Map),this._formatters},enumerable:!0,configurable:!0}),e.prototype.fieldPath=function(){return this.allProperties().fieldPath},e.prototype.locale=function(){return e.DefaultLocale},e.prototype.timezone=function(){return(new Date).getTimezoneOffset()},e.DefaultLocale="en",e}(M),T=function(r){function e(e,t){return void 0===t&&(t=!1),r.call(this,e,t)||this}return l(e,r),e.prototype.locale=function(){return r.prototype.locale.call(this)},e.prototype.timezone=function(){return r.prototype.timezone.call(this)},e}(E),O=function(){function n(e,t,r){void 0===r&&(r=!1),this._key=e,this._value=t,this.isDecl=r,this._matchArrayIdx=0}return n.fromMap=function(e){var r=new Array;return F.MapWrapper.iterable(e).forEach(function(e,t){r.push(new n(t,e,!1))}),r},Object.defineProperty(n.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),n.prototype.bindToKeyData=function(e){this._matchArrayIdx=e._id,this._matchValue=e.matchValue(this._value)},n.prototype.matches=function(e){if(F.isBlank(this._matchValue))return!0;var t=e[this._matchArrayIdx];return!!F.isPresent(t)&&t.matches(this._matchValue)},n.prototype.toString=function(){var e=new F.StringJoiner([]);return e.add(this.key),e.add("="),e.add(this._value.toString()),e.add("("),e.add(this.isDecl+""),e.add(")"),e.add("[ "),e.add(this._matchArrayIdx+"]"),e.toString()},n}(),j=function(){function f(e,t,r,n){void 0===r&&(r=-1),void 0===n&&(n=-1),this._selectors=e,this._properties=t,this._rank=r,this._lineNumber=n,this.keyMatchesMask=0,this.keyIndexedMask=0,this.keyAntiMask=0}return f.merge=function(l,e,c,p){var u=0;return F.MapWrapper.iterable(e).forEach(function(e,t){var r=l.managerForProperty(t),n=c.get(t),i=F.isPresent(p)&&t===p,o=r.mergeProperty(t,n,e,i);if(o!==n){c.set(t,o);var a=r._keyDataToSet;if(F.isPresent(a)){var s=F.shiftLeft(1,a._id);0==(s&u)&&c instanceof U&&(u|=s,c.addContextKey(r))}}}),u},f.prototype.matches=function(e){try{for(var t=B(this._selectors),r=t.next();!r.done;r=t.next()){if(!r.value.matches(e))return!1}}catch(o){n={error:o}}finally{try{r&&!r.done&&(i=t["return"])&&i.call(t)}finally{if(n)throw n.error}}return!0;var n,i},f.prototype.apply=function(e,t,r){return this._rank===Number.MIN_VALUE?0:f.merge(e,this._properties,t,r)},f.prototype.disable=function(){this._rank=Number.MIN_VALUE},f.prototype.disabled=function(){return this._rank===Number.MIN_VALUE},Object.defineProperty(f.prototype,"lineNumber",{get:function(){return this._lineNumber},set:function(e){this._lineNumber=e},enumerable:!0,configurable:!0}),f.prototype.location=function(){var e=F.isPresent(this._ruleSet)?this._ruleSet.filePath:"Unknow";return 0<=this._lineNumber?new F.StringJoiner([e,":",this._lineNumber+""]).toString():e},Object.defineProperty(f.prototype,"selectors",{get:function(){return this._selectors},set:function(e){this._selectors=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"properties",{get:function(){return this._properties},set:function(e){this._properties=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"rank",{get:function(){return this._rank},set:function(e){this._rank=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"ruleSet",{get:function(){return this._ruleSet},set:function(e){this._ruleSet=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),f.prototype.isEditable=function(){return null!==this._ruleSet&&0<this._ruleSet.editableStart&&this._id>=this._ruleSet.editableStart},f.prototype.createDecl=function(){var e=this._selectors,t=e[e.length-1],r=this.convertKeyOverrides(e.slice(0,e.length-1));F.isBlank(this._properties)&&(this._properties=new Map);try{for(var n=B(e),i=n.next();!i.done;i=n.next()){var o=i.value;F.isArray(o.value)||this._properties.set(o.key,o.value)}}catch(d){p={error:d}}finally{try{i&&!i.done&&(u=n["return"])&&u.call(n)}finally{if(p)throw p.error}}this._properties.set(V.DeclRule,new N(this));var a=!1;try{for(var s=B(r),l=s.next();!l.done;l=s.next()){(o=l.value).key===t.key&&(a=!0)}}catch(v){_={error:v}}finally{try{l&&!l.done&&(y=s["return"])&&y.call(s)}finally{if(_)throw _.error}}if(!a){var c=V.overrideKeyForKey(t.key);r.unshift(new O(c,V.NullMarker))}r.push(new O(V.KeyDeclare,t.key));var p,u,_,y,h=new Map;return h.set(t.key,t.value),new f(r,h,0,-1)},f.prototype.convertKeyOverrides=function(e){for(var t=e,r=e.length,n=0;n<r;n++){for(var i=e[n],o=n+1;o<r;o++){if(e[o].key===i.key){t===e&&(t=e.slice(0,n)),i=new O(V.overrideKeyForKey(i.key),i.value);break}}t!==e&&t.push(i)}return t},f.prototype.toString=function(){var e=new F.StringJoiner(["<Rule ["]);return e.add(this._rank+"] "),F.isBlank(this.selectors)?e.add("null, null --\x3e null >"):(e.add(F.ListWrapper.toString(this._selectors)),e.add(" -> "),this._properties?(this._properties.has("declRule"),e.add(F.MapWrapper.toString(this._properties)+" >")):e.add("[,] >"),e.add("[ "),e.add(this.keyIndexedMask+", "),e.add(this.keyAntiMask+", "),e.add(this.keyMatchesMask+""),e.add(" ]")),e.toString()},f.prototype._checkRule=function(i,o){var a=this;F.ListWrapper.forEachWithIndex(this.selectors,function(e,t){var r=i.get(e.key),n=o.keyData(e.key);F.isPresent(n._transformer)&&(r=n._transformer.tranformForMatch(r)),F.isPresent(r)&&(V.KeyAny===e.value&&F.BooleanWrapper.boleanValue(r)||V.objectEquals(r,e.value)||F.isArray(e.value)&&-1<e.value.indexOf(r)||F.isArray(e.value)&&-1<r.indexOf(e.value))||F.print("Possible bad rule match!  Rule: %s; selector: %s, context val: %s"+a+" "+e+" "+r)})},f}(),N=function Qe(e){this.rule=e},V=function(){function K(){this._rules=new Array,this._ruleCount=0,this._testRules=new Map,this._nextKeyId=0,this._ruleSetGeneration=0,this._keyData=new Map,this._keyDatasById=new Array(K.MaxKeyDatas),this._MatchToPropsCache=new a.Dictionary,this._PropertyMapUniquer=new a.Dictionary,this._identityCache=new a.Dictionary,this._managerForProperty=new Map,this._declareKeyMask=0,K.PropertyMerger_DeclareList=new J,K.PropertyMerger_Traits=new X,K.PropertyMerger_List=new $,K.Transformer_KeyPresent=new ne,this._declareKeyMask=this.keyData(K.KeyDeclare).maskValue(),this.registerPropertyMerger(K.KeyTrait,K.PropertyMerger_Traits);var e=new j(null,null,0,0);e.disable(),this._rules[0]=e,this._ruleCount=1}return K.booleanValue=function(e){return F.BooleanWrapper.boleanValue(e)},K.toList=function(e){return F.isArray(e)?e:[e]},K.objectEquals=function(e,t){return!(!F.isBlank(e)||!F.isBlank(t))||!F.isBlank(e)&&!F.isBlank(t)&&F.equals(e,t)},K.overrideKeyForKey=function(e){return e+"_o"},K.addTraits=function(e,t){var r=t.get(K.KeyTrait);F.isBlank(r)?t.set(K.KeyTrait,e):(F.ListWrapper.addAll(r,e),t.set(K.KeyTrait,r))},K.addTrait=function(e,t){var r=t.get(K.KeyTrait);F.isBlank(r)?t.set(K.KeyTrait,K.toList(e)):(r.push(e),t.set(K.KeyTrait,r))},K.className=function(e){return F.isStringMap(e)&&(F.isEntity(e)||F.isValue(e))?e.className():F.isStringMap(e)?F.objectToName(e):F.isFunction(e)?e.name:e},K.prototype.registerLoader=function(e){this._ruleLoader=e},K.prototype.addRule=function(e){var t=e.selectors;if(0<t.length&&t[t.length-1].isDecl){var r=e.createDecl();this._addRule(r,!0)}F.isPresent(e.properties)&&(e._selectors=e.convertKeyOverrides(e._selectors),this._addRule(e,!0))},K.prototype._addToRules=function(e,t){this._rules[t]=e},K.prototype._addRule=function(e,t){F.assert(F.isPresent(this._currentRuleSet),"Attempt to add rule without current RuleSet");var r,n,i=e._selectors,o=this._currentRuleSet.allocateNextRuleEntry();e.id=o,0===e.rank&&(e.rank=this._currentRuleSet._rank++),e.ruleSet=this._currentRuleSet,this._addToRules(e,o);for(var a=this.declareKeyMask,s=0,l=0,c=0,p=i.length,u=K._UsePartialIndexing?this.bestSelectorToIndex(i):null,_=p-1;0<=_;_--){var y=i[_],h=null===u||y===u,d=(w=this.keyData(y.key)).maskValue();if(this.isNullMarker(y.value))c|=d;else{if(h||K._DebugDoubleCheckMatches){if(F.isArray(y.value))try{for(var v=B(y.value),f=v.next();!f.done;f=v.next()){var m=f.value;w.addEntry(m,o)}}catch(A){k={error:A}}finally{try{f&&!f.done&&(g=v["return"])&&g.call(v)}finally{if(k)throw k.error}}else w.addEntry(y.value,o);h&&(l|=F.shiftLeft(1,w.id))}h||y.bindToKeyData(w),s|=d,w.isPropertyScope&&F.isBlank(r)&&(r=w),0!=(d&a)&&(n=y.value)}}var k,g,b=F.isPresent(n),D=F.isPresent(n)&&!this.keyData(n).isPropertyScope;if((!b||D)&&(b||(c|=a),F.isPresent(r)&&t)){var C=e.properties.get(K.KeyTrait);if(F.isPresent(C)){var P=r._key+"_trait",x=F.MapWrapper.createEmpty();x.set(P,C);var M=new j(e._selectors,x,e.rank,e.lineNumber);this._addRule(M,!1)}e._selectors=i.slice(0);var S=new O(K.ScopeKey,r.key);e.selectors.push(S);var w=this.keyData(K.ScopeKey);K._UsePartialIndexing&&!K._DebugDoubleCheckMatches||(w.addEntry(r._key,o),l|=F.shiftLeft(1,w._id)),S.bindToKeyData(w),s|=F.shiftLeft(1,w._id)}e.keyMatchesMask=s,e.keyIndexedMask=l,e.keyAntiMask=c},K.prototype.bestSelectorToIndex=function(e){var t,r,n,i=Number.MIN_VALUE,o=0;try{for(var a=B(e),s=a.next();!s.done;s=a.next()){var l=s.value,c=this.selectivityRank(l)+o++;i<c&&(t=l,i=c)}}catch(p){r={error:p}}finally{try{s&&!s.done&&(n=a["return"])&&n.call(a)}finally{if(r)throw r.error}}return t},K.prototype.selectivityRank=function(e){var t=1,r=e.value;return F.isPresent(r)&&K.KeyAny!==r&&(t+=F.isBoolean(r)?1:9),this.keyData(e.key).isPropertyScope&&(t*=5),t},K.prototype._editingRuleEnd=function(){return Math.max(this._currentRuleSet.end,this._ruleCount)},K.prototype._addRuleAndReturnExtras=function(e){var t,r=this._editingRuleEnd();this.addRule(e);for(var n=r,i=this._editingRuleEnd();n<i;n++){var o=this._rules[n];o!==e&&(F.isBlank(t)&&(t=new Array),t.push(o))}return t},K.prototype._updateEditedRule=function(e,t){var r=new j(null,null,0,0);if(r.disable(),this._rules[e.id]=r,F.isPresent(t))try{for(var n=B(t),i=n.next();!i.done;i=n.next()){i.value.disable()}}catch(l){o={error:l}}finally{try{i&&!i.done&&(a=n["return"])&&a.call(n)}finally{if(o)throw o.error}}var o,a,s=e.selectors;return F.isPresent(s)&&0<s.length&&F.ListWrapper.last(s).key===K.ScopeKey&&F.ListWrapper.removeAt(s,s.length),t=this._addRuleAndReturnExtras(e),this.invalidateRules(),t},K.prototype.scopeKeyForSelector=function(e){for(var t=e.length-1;0<=t;t--){var r=e[t];if(this.keyData(r.key).isPropertyScope)return r.key}return null},K.prototype.addRuleFromSelectorMap=function(e,t){this.addRuleFromSelectorMapWithRank(e,t,0)},K.prototype.addRuleFromSelectorMapWithRank=function(e,t,r){var n=new j(O.fromMap(e),t,0,-1);0!==r&&(n.rank=r),this.addRule(n)},K.prototype.addRules=function(e,r){var n,i,t,o;if(F.MapWrapper.iterable(e).forEach(function(e,t){"props"===t?n=e:"rules"===t?i=e:r.push(new O(t,e))}),F.isPresent(n)&&this.addRule(new j(r,n,0)),F.isPresent(i))try{for(var a=B(i),s=a.next();!s.done;s=a.next()){var l=s.value;this.addRules(l,r)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(o=a["return"])&&o.call(a)}finally{if(t)throw t.error}}},K.prototype._loadRules=function(e,t,r){var n=this;void 0===t&&(t="system"),void 0===r&&(r=!0);try{F.isPresent(this._ruleLoader)&&this._ruleLoader.loadRules(this,e,t,function(e){return n.addRule(e)})}catch(i){throw this.endRuleSet().disableRules(),new Error("Error loading rule: "+i)}},K.prototype.loadRules=function(e){this._loadRulesWithRuleSet("StringLiteral",e,0),this.endRuleSet()},K.prototype._loadRulesWithRuleSet=function(e,t,r){this.beginRuleSetWithRank(r,e);try{this._loadRules(t)}catch(n){throw this.endRuleSet().disableRules(),new Error("Error loading rule: "+n)}},K.prototype.loadUserRule=function(e,t){return F.unimplemented()},K.prototype.parsePropertyAssignment=function(e,t){return F.unimplemented()},K.prototype.clearCaches=function(){this._MatchToPropsCache=new a.Dictionary,this._PropertyMapUniquer=new a.Dictionary,this._identityCache=new a.Dictionary},K.prototype.isTraitExportRule=function(e){if(F.isBlank(e.properties)||e||1===e.properties.size){var t=Array.from(e.properties.keys())[0];return F.StringWrapper.endsWidth(t,"_trait")}return!1},K.prototype.beginRuleSet=function(e){this.beginRuleSetWithRank(this._ruleCount,e)},K.prototype.beginRuleSetWithRank=function(e,t){try{F.assert(F.isBlank(this._currentRuleSet),"Can t start new rule set while one in progress"),this._currentRuleSet=new ee(this),this._currentRuleSet._start=this._ruleCount,this._currentRuleSet._end=this._ruleCount,this._currentRuleSet._rank=e,this._currentRuleSet._filePath=t}catch(r){throw r}},K.prototype.beginReplacementRuleSet=function(e){var t=e.startRank();this.beginRuleSetWithRank(this._ruleCount,e._filePath),this._currentRuleSet._rank=t},K.prototype.endRuleSet=function(){F.assert(F.isPresent(this._currentRuleSet),"No rule set progress");var e=this._currentRuleSet;return this._ruleCount<e._end&&(this._ruleCount=e._end),this._currentRuleSet=null,this._ruleSetGeneration++,e},Object.defineProperty(K.prototype,"ruleSetGeneration",{get:function(){return this._ruleSetGeneration},enumerable:!0,configurable:!0}),K.prototype.invalidateRules=function(){this._ruleSetGeneration++,this.clearCaches()},K.prototype.newContext=function(){return new M(this)},Object.defineProperty(K.prototype,"declareKeyMask",{get:function(){return this._declareKeyMask},enumerable:!0,configurable:!0}),K.prototype.touch=function(e,t){var r=this.newContext();r.push(),r.set(e,t),r.allProperties(),r.pop()},K.prototype.transformValue=function(e,t){var r=this._keyData.get(e);return F.isPresent(r)&&F.isPresent(r._transformer)&&(t=r._transformer.tranformForMatch(t)),t},K.prototype.match=function(e,t,r){var n=this._keyData.get(e);if(F.isBlank(n))return r;F.shiftLeft(1,n._id);return new u(this,n,t,r)},K.prototype.unionOverrideMatch=function(e,t,r){var n=this._keyData.get(K.overrideKeyForKey(e));return F.isBlank(n)?r:new y(this,n,t,r)},K.prototype.newPropertiesMap=function(){return new U},K.prototype.propertiesForMatch=function(e){var t=this._MatchToPropsCache.getValue(e);if(F.isPresent(t))return t;t=this.newPropertiesMap();var r=e.filteredMatches();if(F.isBlank(r))return t;for(var n=r[0],i=new Array(n),o=0;o<n;o++)i[o]=this._rules[r[o+1]];F.ListWrapper.sort(i,function(e,t){return e.rank-t.rank});var a=0!=(this._declareKeyMask&e.keysMatchedMask)?e.valueForKey(K.KeyDeclare):null;for(var s in i)i[s].apply(this,t,a);return t.awakeProperties(),this._MatchToPropsCache.setValue(e.immutableCopy(),t),t},K.prototype.keyData=function(e){var t=this._keyData.get(e);if(F.isBlank(t)){var r=this._nextKeyId;K.MaxKeyDatas-1<=r&&F.print("Exceeded maximum number of context keys"),this._nextKeyId++,t=new Z(e,r),this._keyDatasById[r]=t,this._keyData.set(e,t)}return t},K.prototype._keysInMask=function(e){for(var t=[],r=0;0!==e;)0!=(1&e)&&t.push(this._keyDatasById[r]._key),r++,e=F.shiftRight(e,1);return t},K.prototype.registerKeyInitObserver=function(e,t){this.keyData(e).addObserver(t)},K.prototype.registerValueTransformerForKey=function(e,t){this.keyData(e)._transformer=t},Object.defineProperty(K.prototype,"identityCache",{get:function(){return this._identityCache},enumerable:!0,configurable:!0}),K.prototype.newMatchArray=function(){return[]},K.prototype.matchArrayAssign=function(e,t,r){var n=t._id,i=e[n];F.isPresent(i)&&(r=i.updateByAdding(r)),e[n]=r},K.prototype.propertyWillDoMerge=function(e,t){var r=this.mergerForProperty(e);return this.isPropertyMergerIsChaining(r)||F.isPresent(t)&&t instanceof Map},K.prototype.managerForProperty=function(e){var t=this._managerForProperty.get(e);return F.isBlank(t)&&(t=new z(e),this._managerForProperty.set(e,t)),t},K.prototype.mirrorPropertyToContext=function(e,t){var r=this.keyData(t);this.managerForProperty(e)._keyDataToSet=r},K.prototype.defineKeyAsPropertyScope=function(e){this.keyData(e).isPropertyScope=!0;var t=e+"_trait";this.mirrorPropertyToContext(t,t),this.registerPropertyMerger(t,K.PropertyMerger_DeclareList)},K.prototype.isPropertyScopeKey=function(e){return K.ScopeKey===e},K.prototype.registerPropertyMerger=function(e,t){F.isBlank(t._meta)&&(t._meta=this),this.managerForProperty(e)._merger=t},K.prototype.mergerForProperty=function(e){return this.managerForProperty(e)._merger},K.prototype.isPropertyMergerIsChaining=function(e){return F.isPresent(e.isPropMergerIsChainingMark)&&e.isPropMergerIsChainingMark},K.prototype.groupForTrait=function(e){return"default"},K.prototype._logRuleStats=function(){var e=0,t=this._keyData.keys(),r=[];try{for(var n=B(Array.from(t)),i=n.next();!i.done;i=n.next()){var o=i.value,a=this._keyData.get(o),s=a.ruleVecs.values();try{for(var l=B(s),c=l.next();!c.done;c=l.next()){var p=c.value;e+=(m=new W(a._key,p._value,F.isPresent(p._arr)?p._arr[0]:0)).count,r.push(m)}}catch(k){y={error:k}}finally{try{c&&!c.done&&(h=l["return"])&&h.call(l)}finally{if(y)throw y.error}}}}catch(g){u={error:g}}finally{try{i&&!i.done&&(_=n["return"])&&_.call(n)}finally{if(u)throw u.error}}F.ListWrapper.sort(r,function(e,t){return t.count-e.count});var u,_,y,h,d=new F.StringJoiner([]),v=Math.min(10,r.length);d.add("Total index entries comparisons performed: "+b._Debug_ElementProcessCount),d.add("\nTotal index entries: "+e),d.add("\nTop  keys/values: "+v);for(var f=0;f<v;f++){var m=r[f];d.add("     "+m.key+"  = "+m.value+" : "+m.count+" entries"),d.add("\n")}F.print(d.toString())},K.prototype.toString=function(){return"Meta"},K.prototype.isNullMarker=function(e){return F.isPresent(e)&&e.markernull},K.prototype.addTestUserRule=function(e,t){this._testRules.set(e,t)},K.KeyAny="*",K.KeyDeclare="declare",K.KeyTrait="trait",K.LowRulePriority=-1e5,K.SystemRulePriority=-2e5,K.ClassRulePriority=-1e5,K.TemplateRulePriority=1e5,K.EditorRulePriority=2e5,K.MaxKeyDatas=64,K.NullMarker={markernull:!0},K.ScopeKey="scopeKey",K.DeclRule="declRule",K._UsePartialIndexing=!0,K._DebugDoubleCheckMatches=!1,K.PropertyMerger_DeclareList=null,K.PropertyMerger_Traits=null,K.PropertyMerger_List=null,K.Transformer_KeyPresent=null,K}(),W=function Ye(e,t,r){this.key=e,this.value=t,this.count=r},z=function(){function e(e){this._name=e}return e.prototype.mergeProperty=function(e,t,r,n){if(F.isBlank(t))return r;if(r instanceof G)return r.value();if(F.isBlank(this._merger)){if(t instanceof Map&&F.isPresent(r)&&r instanceof Map){var i=F.MapWrapper.clone(t);r=F.MapWrapper.mergeMapIntoMapWithObject(i,r,!0)}return r}return this._merger instanceof q||!(t instanceof v||r instanceof v)?this._merger.merge(t,r,n):new P(this._merger,t,r)},e}(),G=function(){function e(e){this._value=e}return e.prototype.value=function(){return"null"===this._value?null:this._value},e.prototype.toString=function(){return F.isPresent(this._value)?this._value.toString()+"!":"null!"},e}(),Z=function(){function e(e,t){this._key=e,this._id=t,this._isPropertyScope=!1,this._ruleVecs=new a.Dictionary,this._any=this.get(V.KeyAny)}return e.prototype.maskValue=function(){return F.shiftLeft(1,this._id)},e.prototype.get=function(e){F.isBlank(e)?e=V.NullMarker:F.isPresent(this._transformer)&&(e=this._transformer.tranformForMatch(e));var t=this._ruleVecs.getValue(e);return F.isBlank(t)&&(t=new te(e),F.isPresent(e)&&!F.BooleanWrapper.isFalse(e)&&(t._parent=this._any),this._ruleVecs.setValue(e,t)),t},e.prototype.matchValue=function(e){var r=this;if(F.isArray(e)){var t=e;if(1===t.length)return this.get(t[0]);var n=new re;return F.ListWrapper.forEachWithIndex(t,function(e,t){n.data.push(r.get(e))}),n}return this.get(e)},e.prototype.addEntry=function(e,t){var r=this.get(e),n=r._arr,i=b.addInt(n,t);n!==i&&(r._arr=i)},e.prototype.lookup=function(r,n){var i=this,e=this.get(n);if(!e._read&&F.isPresent(this._observers))try{e._read||F.isPresent(n)&&F.ListWrapper.forEachWithIndex(this._observers,function(e,t){e.notify(r,i._key,n)}),e._read=!0}finally{}return e.checkParent(),e._arr},e.prototype.setParent=function(e,t){var r=this.get(t);this.get(e)._parent=r},e.prototype.parent=function(e){return this.get(e)._parent._value},e.prototype.addObserver=function(e){F.isBlank(this._observers)&&(this._observers=new Array),this._observers.push(e)},Object.defineProperty(e.prototype,"isPropertyScope",{get:function(){return this._isPropertyScope},set:function(e){this._isPropertyScope=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ruleVecs",{get:function(){return this._ruleVecs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"observers",{get:function(){return this._observers},enumerable:!0,configurable:!0}),e}(),U=function(){function e(e){F.isPresent(e)?this._map=new Map(e):this._map=new Map}return e.prototype.get=function(e){return this._map.get(e)},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.clear=function(){this._map.clear()},e.prototype.set=function(e,t){return this._map.set(e,t)},e.prototype["delete"]=function(e){return this._map["delete"](e)},e.prototype.forEach=function(e,t){this._map.forEach(e)},e.prototype.has=function(e){return this._map.has(e)},e.prototype[Symbol.iterator]=function(){return this._map[Symbol.iterator]()},e.prototype.entries=function(){return this._map.entries()},Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.awakeProperties=function(){var n=this;F.MapWrapper.iterable(this).forEach(function(e,t){if(ie(e)){var r=e.awakeForPropertyMap(n);r!==e&&n.set(t,r)}})},e.prototype.addContextKey=function(e){F.isBlank(this._contextPropertiesUpdated)&&(this._contextPropertiesUpdated=new Array),this._contextPropertiesUpdated.push(e)},Object.defineProperty(e.prototype,"contextKeysUpdated",{get:function(){return this._contextPropertiesUpdated},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var r=this,n=new F.StringJoiner(["PropertyMap:"]);return n.add(this.size+","),F.MapWrapper.iterable(this).forEach(function(e,t){ie(e)&&(e.awakeForPropertyMap(r)!==e&&(n.add(t+":"+e),n.add(", ")))}),n.toString()},e}(),q=function(){function e(){}return e.prototype.merge=function(e,t,r){return F.unimplemented()},e.prototype.toString=function(){return"PropertyMergerDynamic"},e}(),H=function(){function e(){}return e.prototype.merge=function(e,t,r){return t},e.prototype.toString=function(){return"OVERWRITE"},e}(),$=function(){function e(){}return e.prototype.merge=function(e,t,r){if(!F.isArray(e)&&!F.isArray(t)&&V.objectEquals(e,t))return e;var n=V.toList(e),i=V.toList(t),o=F.ListWrapper.clone(n);return F.ListWrapper.addElementsIfAbsent(o,i),o},e}(),J=function(e){function t(){return e.call(this)||this}return l(t,e),t.prototype.merge=function(e,t,r){if(!r)return t;if(!F.isArray(e)&&!F.isArray(t)&&V.objectEquals(e,t))return e;var n=[];return F.ListWrapper.addElementsIfAbsent(n,V.toList(e)),F.ListWrapper.addElementsIfAbsent(n,V.toList(t)),n},t.prototype.toString=function(){return"PropertyMergerDeclareList"},t}(q),X=function(g){function e(){return g.call(this)||this}return l(e,g),e.prototype.merge=function(e,t,r){if(r)return g.prototype.merge.call(this,e,t,r);if(!F.isArray(e)&&!F.isArray(t)&&V.objectEquals(e,t))return e;var n,i,o,a,s=V.toList(e),l=V.toList(t),c=[];try{for(var p=B(s),u=p.next();!u.done;u=p.next()){var _=u.value;_ instanceof G&&(_=_.value());var y=!0,h=this._meta.groupForTrait(_);if(F.isPresent(h))try{for(var d=B(l),v=d.next();!v.done;v=d.next()){var f=v.value;if(f instanceof G&&(f=f.value()),h===this._meta.groupForTrait(f)){y=!1;break}}}catch(m){o={error:m}}finally{try{v&&!v.done&&(a=d["return"])&&a.call(d)}finally{if(o)throw o.error}}y&&c.push(_)}}catch(k){n={error:k}}finally{try{u&&!u.done&&(i=p["return"])&&i.call(p)}finally{if(n)throw n.error}}return F.ListWrapper.addElementsIfAbsent(c,l),c},e.prototype.toString=function(){return"PropertyMergerDeclareListForTrait"},e}(J),Q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isPropMergerIsChainingMark=!0,e}return l(e,t),e.prototype.merge=function(e,t,r){return F.isBlank(t)?null:!(F.isBoolean(e)&&!F.BooleanWrapper.boleanValue(e)||F.isBoolean(t)&&!F.BooleanWrapper.boleanValue(t))&&(F.isBoolean(e)&&F.BooleanWrapper.boleanValue(e)?t instanceof v?t:F.BooleanWrapper.boleanValue(t):F.isBoolean(t)&&F.BooleanWrapper.boleanValue(t)?e instanceof v?e:F.BooleanWrapper.boleanValue(t):e instanceof v||t instanceof v?new P(this,e,t):F.BooleanWrapper.boleanValue(e)&&F.BooleanWrapper.boleanValue(t))},e.prototype.toString=function(){return"AND"},e}(q),Y=function(){function e(){this.isPropMergerIsChainingMark=!0}return e.prototype.merge=function(e,t,r){return F.isString(t)||F.isBoolean(t)&&F.BooleanWrapper.isFalse(t)?t:e},e.prototype.toString=function(){return"VALIDATE"},e}(),ee=function(){function e(e){this._meta=e,this._start=0,this._end=0,this._editableStart=-1,this._rank=0}return e.prototype.disableRules=function(){for(var e=this._start;e<this._end;e++)this._meta._rules[e].disable();this._meta.clearCaches()},Object.defineProperty(e.prototype,"filePath",{get:function(){return this._filePath},enumerable:!0,configurable:!0}),e.prototype.rules=function(e){for(var t=[],r=e?-1===this._editableStart?this._end:this._editableStart:this._start;r<this._end;r++){var n=this._meta._rules[r];n.disabled()||this._meta.isTraitExportRule(n)||t.push(n)}return t},e.prototype.startRank=function(){return this._start<this._meta._ruleCount?this._meta._rules[this._start].rank:this._rank-(this._end-this._start)},e.prototype.allocateNextRuleEntry=function(){return this._meta._ruleCount>this._end?this._meta._ruleCount++:this._end++},Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editableStart",{get:function(){return this._editableStart},enumerable:!0,configurable:!0}),e}(),te=function(){function t(e){this._read=!1,this._parentSize=0,this._value=e}return t.prototype.checkParent=function(){if(F.isPresent(this._parent)){this._parent.checkParent();var e=this._parent._arr;F.isPresent(e)&&e[0]!==this._parentSize&&(this._arr=b.union(this._arr,e),this._parentSize=e[0])}},t.prototype.matches=function(e){return e instanceof t?e===this||F.isPresent(this._parent)&&this._parent.matches(e):e.matches(this)},t.prototype.updateByAdding=function(e){var t=new re;return t.data.push(this),t.updateByAdding(e)},t}(),re=function(){function r(){this.data=[]}return r.prototype.matches=function(e){if(e instanceof r){for(var t=0;t<this.data.length;t++)if(e.matches(this.data[t]))return!0}else for(t=0;t<this.data.length;t++)if(this.data[t].matches(e))return!0;return!1},r.prototype.updateByAdding=function(e){if(e instanceof r){var t=e;F.ListWrapper.addAll(this.data,t.data)}else this.data.push(e);return this},r}(),ne=function(){function e(){}return e.prototype.tranformForMatch=function(e){return!(!F.isPresent(e)||F.BooleanWrapper.isFalse(e))},e}();function ie(e){return F.isPresent(e)&&F.isPresent(e.propertyAwaking)}
/**
     * @license
     * Copyright 2017 SAP Ariba
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     * http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     *
     * Based on original work: MetaUI: Craig Federighi (2008)
     *
     */var oe=function et(e,t,r){this.name=e,this.properties=t,this.hidden=r},ae=function(t){function h(){var e=t.call(this)||this;return e._traitToGroupGeneration=-1,e.registerKeyInitObserver(h.KeyClass,new se),e.registerKeyInitObserver(h.KeyType,new le),e.defineKeyAsPropertyScope(h.KeyField),e.defineKeyAsPropertyScope(h.KeyAction),e.defineKeyAsPropertyScope(h.KeyActionCategory),e.defineKeyAsPropertyScope(h.KeyClass),e.registerPropertyMerger(h.KeyVisible,new Q),e.registerPropertyMerger(h.KeyEditable,new Q),e.registerPropertyMerger(h.KeyValid,new pe),e.registerPropertyMerger(h.KeyClass,V.PropertyMerger_DeclareList),e.registerPropertyMerger(h.KeyField,V.PropertyMerger_DeclareList),e.registerPropertyMerger(h.KeyAction,V.PropertyMerger_DeclareList),e.registerPropertyMerger(h.KeyActionCategory,V.PropertyMerger_DeclareList),e.registerPropertyMerger(h.KeyTraitGroup,V.PropertyMerger_DeclareList),e.mirrorPropertyToContext(h.KeyClass,h.KeyClass),e.mirrorPropertyToContext(h.KeyType,h.KeyType),e.mirrorPropertyToContext(h.KeyElementType,h.KeyElementType),e.mirrorPropertyToContext(h.KeyTrait,V.KeyTrait),e.mirrorPropertyToContext(h.KeyEditable,h.KeyEditable),e.registerValueTransformerForKey(h.KeyObject,V.Transformer_KeyPresent),e}return l(h,t),h.validationError=function(e){var t=e.propertyForKey(h.KeyValid);return F.isBlank(t)?null:F.isBoolean(t)?F.BooleanWrapper.boleanValue(t)?null:"Invalid entry":t.toString()},h.prototype.newContext=function(){return new E(this,!1)},h.prototype.newPropertiesMap=function(){return new ce},h.prototype.itemNames=function(e,t){e.push(),e.set(h.KeyDeclare,t);var r=e.listPropertyForKey(t);return e.pop(),r},h.prototype.itemProperties=function(e,t,r){return this.itemPropertiesForNames(e,t,this.itemNames(e,t),r)},h.prototype.itemPropertiesForNames=function(e,t,r,n){var i,o,a=[];try{for(var s=B(r),l=s.next();!l.done;l=s.next()){var c=l.value;e.push(),e.set(t,c);var p=e.allProperties().get(h.KeyVisible),u=e.staticallyResolveValue(p),_=F.isBlank(u)||F.BooleanWrapper.isFalse(u);_&&n||a.push(new oe(c,e.allProperties(),_)),e.pop()}}catch(y){i={error:y}}finally{try{l&&!l.done&&(o=s["return"])&&o.call(s)}finally{if(i)throw i.error}}return a},h.prototype.groupForTrait=function(e){if(null==this._traitToGroup||this._traitToGroupGeneration<this.ruleSetGeneration){this._traitToGroupGeneration=this.ruleSetGeneration,this._traitToGroup=new Map;var t=this.newContext();try{for(var r=B(this.itemNames(t,h.KeyTraitGroup)),n=r.next();!n.done;n=r.next()){var i=n.value;t.push(),t.set(h.KeyTraitGroup,i);try{for(var o=B(this.itemNames(t,h.KeyTrait)),a=o.next();!a.done;a=o.next()){var s=a.value;this._traitToGroup.set(s,i)}}catch(_){p={error:_}}finally{try{a&&!a.done&&(u=o["return"])&&u.call(o)}finally{if(p)throw p.error}}t.pop()}}catch(y){l={error:y}}finally{try{n&&!n.done&&(c=r["return"])&&c.call(r)}finally{if(l)throw l.error}}}return this._traitToGroup.get(e);var l,c,p,u},Object.defineProperty(h.prototype,"injector",{get:function(){return this._injector},set:function(e){this._injector=e},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"componentRegistry",{get:function(){return this._componentRegistry},set:function(e){this._componentRegistry=e},enumerable:!0,configurable:!0}),h.KeyClass="class",h.KeyField="field",h.KeyAction="action",h.KeyActionCategory="actionCategory",h.KeyObject="object",h.KeyValue="value",h.KeyType="type",h.KeyElementType="elementType",h.KeyTraitGroup="traitGroup",h.KeyVisible="visible",h.KeyEditable="editable",h.KeyValid="valid",h.KeyRank="rank",h.DefaultActionCategory="General",h._FieldPathNullMarker=new F.FieldPath("null"),h}(V),se=function(){function e(){}return e.prototype.notify=function(e,t,r){var n;this._meta=e;var i=this._meta.componentRegistry;F.assert(F.isPresent(i),"Component registry is not initialized");var o=null;if(F.isString(r)&&(o=i.nameToType.get(r))&&F.isPresent(o))n=new o;else if(F.isBlank(o))return;F.assert(V.className(n)===r,"Trying to process and register a class that does not exists on Context"),this.registerRulesForClass(n,r)},e.prototype.registerRulesForClass=function(e,t){this._meta.keyData(ae.KeyClass).setParent(t,"Object"),this._meta.beginRuleSet(t);try{var r=[new O(ae.KeyClass,t)],n=this._meta.newPropertiesMap();r[0].isDecl=!0;var i=new j(r,n,ae.ClassRulePriority);this._meta.addRule(i),this.registerRulesForFields(e,t)}finally{this._meta.endRuleSet()}},e.prototype.registerRulesForFields=function(e,t){F.assert(F.isPresent(e.$proto),"Cannot register fields without a $proto method that will expose all the fields");var r,n,i=e.$proto(),o=Object.keys(i),a=0;try{for(var s=B(o),l=s.next();!l.done;l=s.next()){var c=l.value,p=i[c].constructor.name,u=new Map;if(u.set(ae.KeyField,c),u.set(ae.KeyType,p),u.set(ae.KeyVisible,!0),F.isArray(i[c])){F.assert(0<i[c].length," Cannot register type[array] and its type without properly initialized prototype");var _=i[c][0].constructor.name;u.set(ae.KeyElementType,_)}var y=[new O(ae.KeyClass,t),new O(ae.KeyField,c)];y[1].isDecl=!0,u.set(ae.KeyRank,10*(1+a++));var h=new j(y,u,ae.ClassRulePriority);this._meta.addRule(h)}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=s["return"])&&n.call(s)}finally{if(r)throw r.error}}},e}(),le=function(){function e(){}return e.prototype.notify=function(e,t,r){},e}(),ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),Object.defineProperty(t.prototype,"fieldPath",{get:function(){if(F.isBlank(this._fieldPath)){var e=this.get(ae.KeyValue),t=this.get(ae.KeyField);this._fieldPath=F.isPresent(t)&&F.isBlank(e)?new F.FieldPath(t):ae._FieldPathNullMarker}return this._fieldPath===ae._FieldPathNullMarker?null:this._fieldPath},enumerable:!0,configurable:!0}),t.prototype.isFieldNullMarker=function(e){return F.isPresent(e)&&"null"===e.path},t}(U),pe=function(){function e(){this.isPropMergerIsChainingMark=!0}return e.prototype.merge=function(e,t,r){return F.isString(t)||F.isBoolean(t)&&F.BooleanWrapper.isFalse(t)?t:e},e.prototype.toString=function(){return"VALIDATE"},e}(),ue={oss:[{_selectors:[{_key:"object",_value:"*",_isDecl:!1}],_properties:{"class":{t:"Expr",v:"Meta.className(object)"}},_rank:0},{_selectors:[{_key:"object",_value:"*",_isDecl:!1},{_key:"declare",_value:"*",_isDecl:!1}],_properties:{"class":{t:"Expr",v:"Meta.className(object)"}},_rank:0},{_selectors:[{_key:"operation",_value:"search",_isDecl:!1}],_properties:{"class":{t:"Expr",v:'values.get("class")'}},_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1},{_key:"layout",_value:"*",_isDecl:!1}],_properties:{editing:!0},_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{editing:!0},_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_properties:{editing:!0},_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1},{_key:"action",_value:"*",_isDecl:!1}],_properties:{editing:!0},_rank:0},{_selectors:[{_key:"operation",_value:["edit","create","search"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1},{_key:"layout",_value:"*",_isDecl:!1}],_properties:{editing:!1},_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{editing:!1},_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_properties:{editing:!1},_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1},{_key:"action",_value:"*",_isDecl:!1}],_properties:{editing:!1},_rank:0},{_selectors:[{_key:"operation",_value:["view","list"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_properties:{visible:{t:"SDW",v:'!properties.get("hidden")'}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"editing",_value:!0,_isDecl:!1}],_properties:{editable:!0},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"editing",_value:!1,_isDecl:!1}],_properties:{editable:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"trait",_value:"fiveZones",_isDecl:!0}],_properties:{fiveZoneLayout:!0,zones:["zLeft","zMiddle","zRight","zTop","zBottom","zDetail"]},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"trait",_value:"oneZone",_isDecl:!0}],_properties:{zones:["zLeft","zDetail"]},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"trait",_value:"tableZones",_isDecl:!0}],_properties:{zones:["zMain","zLeft","zRight","zTop","zBottom","zDetail"]},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:["create","edit","view","search"],_isDecl:!1}],_properties:{trait:"fiveZones"},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"list",_isDecl:!1}],_properties:{trait:"tableZones"},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FormZones",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FormZones",_isDecl:!0},{_key:"trait",_value:"fiveZones",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FormZones",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FormZones",_isDecl:!0},{_key:"trait",_value:"oneZone",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FormZones",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"*",_isDecl:!1}],_properties:{component:"StringComponent",bindings:{value:{t:"CFP",v:"value"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"boolean",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"boolean",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"Checkbox"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"boolean",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Number",_isDecl:!1}],_properties:{bindings:{formatter:{t:"CFP",v:"formatters.integer"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Number",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"InputFieldComponent"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Number",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Number",_isDecl:!1},{_key:"operation",_value:"search",_isDecl:!1}],_properties:{bindings:{formatter:{t:"CFP",v:"formatters.blankNull.integer"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Number",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Date",_isDecl:!1}],_properties:{component:"DateAndTimeComponent",bindings:{formatter:"shortDate",showTime:!1}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Date",_isDecl:!1},{_key:"fiveZoneLayout",_value:!0,_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Date",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Date",_isDecl:!1},{_key:"trait",_value:"dateTime",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{bindings:{formatter:"dateTime",showTime:!0}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Date",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"java.lang.Enum",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"java.lang.Enum",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"GenericChooserComponent",bindings:{destinationClass:{t:"Expr",v:"type"},displayKey:"name",formatter:{t:"CFP",v:"formatters.identifier"},key:{t:"Expr",v:"field"},object:{t:"Expr",v:"object"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"java.lang.Enum",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1},{_key:"operation",_value:["search","list"],_isDecl:!1}],_properties:{bindings:{type:"Popup"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"java.lang.Enum",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"java.lang.Enum",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1},{_key:"trait",_value:"enum",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"GenericChooserComponent",bindings:{multiselect:!0,destinationClass:{t:"Expr",v:'properties.get("enumClass")'},displayKey:"name",formatter:{t:"CFP",v:"formatters.identifier"},key:{t:"Expr",v:"field"},object:{t:"Expr",v:"object"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1},{_key:"operation",_value:["search","list"],_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1},{_key:"trait",_value:"ownedToMany",_isDecl:!0}],_properties:{component:"MetaDetailTable",after:"zDetail"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:["Array","Set"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"[B",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"[B",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"FileUploadChooser",bindings:{bytes:{t:"CFP",v:"value"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"[B",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"[B",_isDecl:!1},{_key:"editable",_value:!1,_isDecl:!1}],_properties:{bindings:{value:{t:"Expr",v:'value ? ("" + value.length + " bytes") : "(none)"'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"[B",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"File",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"File",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"FileUploadChooser",bindings:{file:{t:"CFP",v:"value"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"File",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"File",_isDecl:!1},{_key:"editable",_value:!1,_isDecl:!1}],_properties:{bindings:{value:{t:"Expr",v:'value ? value.name : "(none)"'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"File",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"InputFieldComponent"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"longtext",_isDecl:!0}],_properties:{after:"zBottom"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"longtext",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"TextAreaComponent",bindings:{rows:10,cols:60}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"longtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"longtext",_isDecl:!0},{_key:"operation",_value:["search","list"],_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"longtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0}],_properties:{bindings:{escapeUnsafeHtml:!0},after:"zBottom"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"RichTextArea",bindings:{rows:10,cols:60}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0},{_key:"operation",_value:"search",_isDecl:!1}],_properties:{after:"zNone"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0},{_key:"operation",_value:"list",_isDecl:!1}],_properties:{editable:!1,after:"zDetail"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"richtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"secret",_isDecl:!0}],_properties:{bindings:{formatter:{t:"CFP",v:"formatters.hiddenPassword"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"secret",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"AWPasswordField",bindings:{}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"secret",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"secret",_isDecl:!0},{_key:"operation",_value:["search","list"],_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"secret",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1},{_key:"trait",_value:"truncated",_isDecl:!1}],_properties:{component:"TruncateString",bindings:{size:10}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"String",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1},{_key:"trait",_value:"imageData",_isDecl:!0}],_properties:{contentType:"image/jpeg"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1},{_key:"trait",_value:"imageData",_isDecl:!0},{_key:"editable",_value:!1,_isDecl:!1}],_properties:{component:"AWImageData",bindings:{bytes:{t:"CFP",v:"value"},contentType:{t:"Expr",v:'ContentTypeUtils.contentTypeNamed(properties.get("contentType"))'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1},{_key:"trait",_value:"imageData",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1},{_key:"trait",_value:"imageData",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{bindings:{awcontentLayouts:{_main:"_imgUploadPreview"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1},{_key:"trait",_value:"imageData",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Binary",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"type",_value:"Money",_isDecl:!1}],_properties:{component:"CurrencyComponent",bindings:{money:{t:"CFP",v:"value"},currencies:{t:"Expr",v:'properties.get("currencies")'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"layout",_value:"_imgUploadPreview",_isDecl:!1}],_properties:{wrapperComponent:"MetaContext",component:"AWImageData",wrapperBindings:{scopeKey:"field"},bindings:{bytes:{t:"CFP",v:"value"},style:"width:100px",contentType:{t:"Expr",v:'ContentTypeUtils.contentTypeNamed(properties.get("contentType"))'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"derived",_isDecl:!0}],_properties:{editable:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"derived",_isDecl:!0},{_key:"editing",_value:"*",_isDecl:!1}],_properties:{after:"zNone"},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"derived",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"searchable",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"searchable",_isDecl:!0},{_key:"operation",_value:"search",_isDecl:!1}],_properties:{visible:!0,editable:{t:"OV",v:"true"},after:{t:"OV",v:"null"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"searchable",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"required",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"required",_isDecl:!0},{_key:"operation",_value:["edit","create"],_isDecl:!1}],_properties:{required:!0},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"required",_isDecl:!0},{_key:"operation",_value:["edit","create"],_isDecl:!1},{_key:"object",_value:"*",_isDecl:!1}],_properties:{valid:{t:"Expr",v:'((value != undefined) && (value != null)) ? true : "Answer required"'}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"required",_isDecl:!0},{_key:"operation",_value:["edit","create"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"required",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"list",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"list",_isDecl:!0},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"GenericChooserComponent",bindings:{list:{t:"Expr",v:'properties.get("choices")'},type:{t:"Expr",v:'properties.get("chooserStyle")'},key:{t:"Expr",v:'properties.get("field")'},object:{t:"Expr",v:"object"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"list",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"asObject",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"asObject",_isDecl:!0},{_key:"editable",_value:!1,_isDecl:!1}],_properties:{component:"MetaObjectDetailComponent",nestedLayout:!0,bindings:{layout:"Inspect",useNoLabelLayout:!0,label:{t:"Expr",v:'properties.get("label")'},object:{t:"CFP",v:"value"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"asObject",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"asHover",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"asHover",_isDecl:!0},{_key:"editable",_value:!1,_isDecl:!1}],_properties:{component:"HoverCardComponent",bindings:{linkTitle:{t:"CFP",v:"value"},appendContentToBody:!1,ngcontentLayout:"Content"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"asHover",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"layout",_value:"Content",_isDecl:!0}],_properties:{component:"MetaObjectDetailComponent",bindings:{layout:"Inspect",object:{t:"CFP",v:"value"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noCreate",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noCreate",_isDecl:!0},{_key:"operation",_value:"create",_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noCreate",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noSearch",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noSearch",_isDecl:!0},{_key:"operation",_value:"search",_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"noSearch",_isDecl:!0}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1},{_key:"trait",_value:"Popup",_isDecl:!0}],_properties:{bindings:{type:"Dropdown"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1},{_key:"trait",_value:"PopupControl",_isDecl:!0}],_properties:{bindings:{type:"PopupControl"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1},{_key:"trait",_value:"Chooser",_isDecl:!0}],_properties:{bindings:{type:"Chooser"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1},{_key:"trait",_value:"PostOnChange",_isDecl:!0}],_properties:{bindings:{}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:"GenericChooserComponent",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1},{_key:"trait",_value:"bold",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{tagName:"b"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1},{_key:"trait",_value:"italic",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{tagName:"i"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1},{_key:"trait",_value:"heading1",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{tagName:"h1"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1},{_key:"trait",_value:"heading2",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{tagName:"h2"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1},{_key:"trait",_value:"heading3",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{tagName:"h3"}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"component",_value:["StringComponent","AWHyperlink","PopupMenuLink"],_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0},{_key:"trait",_value:"longtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0},{_key:"trait",_value:"richtext",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0},{_key:"trait",_value:"secret",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"FieldType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0},{_key:"trait",_value:"Popup",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0},{_key:"trait",_value:"PopupControl",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0},{_key:"trait",_value:"Chooser",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"ChooserType",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0},{_key:"trait",_value:"bold",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0},{_key:"trait",_value:"italic",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0},{_key:"trait",_value:"heading1",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0},{_key:"trait",_value:"heading2",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0},{_key:"trait",_value:"heading3",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"WrapperStyle",_isDecl:!0}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_properties:{visible:{t:"SDW",v:'!properties.get("hidden")'},enabled:!0},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"trait",_value:"pageAction",_isDecl:!0}],_properties:{actionResults:{t:"Expr",v:'meta.routingService.routeForPage(properties.get("pageName"))'}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"trait",_value:"modalComponentPage",_isDecl:!0}],_properties:{pageBindings:{componentName:{t:"Expr",v:'properties.get("componentName")'},title:{t:"Expr",v:'properties.get("title")'}},actionResults:{t:"Expr",v:'meta.compPageWithName("MetaModalPage")'}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"trait",_value:"modalComponentPanel",_isDecl:!0}],_properties:{pageBindings:{clientPanel:!0,componentName:{t:"Expr",v:'properties.get("componentName")'},title:{t:"Expr",v:'properties.get("title")'}},actionResults:{t:"Expr",v:'meta.compPageWithName("MetaModalPage")'}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"trait",_value:"messageResults",_isDecl:!0}],_properties:{actionResults:{t:"Expr",v:"var o = (properties.isInstanceAction ? object : ariba.ui.aribaweb.util.AWUtil.classForName(properties.class)), var v = ariba.util.fieldvalue.FieldValue.getFieldValue(o, properties.action), var m = ariba.util.core.Fmt.S(properties.message, v), ariba.ui.widgets.AribaPageContent.setMessage(m, requestContext.session()), null"},message:"Action Performed: %s"},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"trait",_value:"instance",_isDecl:!0}],_properties:{isInstanceAction:!0,enabled:{t:"Expr",v:"object != null"}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"filterActions",_value:"instance",_isDecl:!1}],_properties:{visible:{t:"Expr",v:'properties.get("isInstanceAction") == true'}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1},{_key:"filterActions",_value:"static",_isDecl:!1}],_properties:{visible:{t:"Expr",v:'!properties.get("isInstanceAction")'}},_rank:0},{_selectors:[{_key:"action",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_properties:{zones:["zMain"]},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionButtons",_isDecl:!0}],_properties:{component:"MetaActionListComponent",visible:!0,bindings:{defaultStyle:"primary",renderAs:"buttons",align:"right"},elementClass:"l-action-buttons"},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionLinks",_isDecl:!0}],_properties:{component:"MetaActionListComponent",visible:!0,bindings:{renderAs:"links",align:"right"},elementClass:"l-action-buttons"},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionMenu",_isDecl:!0}],_properties:{component:"MetaActionListComponent",visible:!0,bindings:{renderAs:"menu",align:"right"},elementClass:"l-action-buttons"},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"InstanceActionButtons",_isDecl:!0}],_properties:{component:"MetaActionListComponent",visible:!0,bindings:{filterActions:"instance",renderAs:"buttons",align:"right"},elementClass:"l-action-buttons"},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"StaticActionButtons",_isDecl:!0}],_properties:{component:"MetaActionListComponent",visible:!0,bindings:{filterActions:"static",renderAs:"buttons",align:"right"},elementClass:"l-action-buttons"},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"Tabs",_isDecl:!0}],_properties:{component:"MetaTabs",visible:!0},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"Sections",_isDecl:!0}],_properties:{component:"MetaSectionsComponent",visible:!0},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"Form",_isDecl:!0}],_properties:{component:"MetaFormComponent",visible:!0},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"Stack",_isDecl:!0}],_properties:{component:"MetaElementListComponent",visible:!0},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"OwnZone",_isDecl:!0}],_properties:{zonePath:{t:"Expr",v:"layout"}},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"trait",_value:"pad8",_isDecl:!0}],_properties:{wrapperComponent:"GenericContainerComponent",wrapperBindings:{style:"padding:8px",tagName:"div"}},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"component",_value:"MetaFormComponent",_isDecl:!1},{_key:"trait",_value:"labelsOnTop",_isDecl:!0}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1},{_key:"layout_trait",_value:"labelsOnTop",_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{bindings:{showLabelsAboveControls:!0}},_rank:0},{_selectors:[{_key:"layout",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0},{_key:"trait",_value:"Tabs",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0},{_key:"trait",_value:"Sections",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0},{_key:"trait",_value:"Form",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0},{_key:"trait",_value:"Stack",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"LayoutGrouping",_isDecl:!0}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"layout",_value:["Inspect","SearchForm"],_isDecl:!1}],_properties:{trait:"Form",label:{t:"Expr",v:"UIMeta.beautifyClassName(values.class)"}},_rank:0},{_selectors:[{_key:"class",_value:{},_isDecl:!1},{_key:"layout",_value:["Inspect","SearchForm"],_isDecl:!1}],_properties:{component:"StringComponent",bindings:{}},_rank:0},{_selectors:[{_key:"layout",_value:"InspectWithActions",_isDecl:!1}],_properties:{trait:"Stack"},_rank:0},{_selectors:[{_key:"layout",_value:"InspectWithActions",_isDecl:!1},{_key:"layout",_value:"Actions",_isDecl:!0}],_properties:{trait:"ActionMenu"},_rank:0},{_selectors:[{_key:"layout",_value:"InspectWithActions",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"InspectWithActions",_isDecl:!1},{_key:"layout",_value:"Inspect",_isDecl:!0}],_properties:{trait:"Form"},_rank:0},{_selectors:[{_key:"layout",_value:"InspectWithActions",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:"ButtonArea",_isDecl:!1}],_properties:{trait:"StaticActionButtons"},_rank:0},{_selectors:[{_key:"layout",_value:"SelectionButtonArea",_isDecl:!1}],_properties:{trait:"InstanceActionButtons"},_rank:0},{_selectors:[{_key:"layout",_value:"Links",_isDecl:!1}],_properties:{trait:"ActionLinks"},_rank:0},{_selectors:[{_key:"layout",_value:"LabelField",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"layout",_value:"LabelField",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"labelField",_isDecl:!0}],_properties:{visible:{t:"OV",v:"true"}},_rank:0},{_selectors:[{_key:"layout",_value:"LabelField",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"layout",_value:["Table","DetailTable"],_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{component:"MetaTable",bindings:{enableScrolling:!0,showSelectionColumn:!1,displayGroup:{t:"CFP",v:"displayGroup"},title:{t:"Expr",v:'properties.get("label")'},submitOnSelectionChange:!0,singleSelect:!0}},_rank:0},{_selectors:[{_key:"layout",_value:"ListItem",_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{component:"StringComponent",bindings:{value:{t:"Expr",v:'properties.get("objectTitle")'}}},_rank:0},{_selectors:[{_key:"object",_value:"*",_isDecl:!1},{_key:"class",_value:"*",_isDecl:!1}],_properties:{objectTitle:{t:"Expr",v:'FieldPath.getFieldValue(object, meta.displayKeyForClass(values.get("class")))'}},_rank:0},{_selectors:[{_key:"object",_value:"*",_isDecl:!1},{_key:"layout",_value:"*",_isDecl:!1}],_properties:{objectTitle:{t:"Expr",v:'FieldPath.getFieldValue(object, meta.displayKeyForClass(values.get("class")))'}},_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1}],_properties:{pageBindings:{t:"Expr",v:'(properties.get("homePage") == "MetaHomePageComponent") ? new Map().set("module", values.get("module")) : null'},component:"MetaDashboardLayoutComponent",visible:{t:"SDW",v:'!properties.get("hidden")'},homePage:"MetaHomePageComponent"},_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1},{_key:"layout",_value:"*",_isDecl:!1}],_properties:{visible:!0},_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionTOC",_isDecl:!0}],_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionTOC",_isDecl:!0},{_key:"layout",_value:"Actions",_isDecl:!0}],_properties:{component:"MetaActionListComponent",label:"Actions",after:"zToc"},_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1},{_key:"trait",_value:"ActionTOC",_isDecl:!0}],_rank:0},{_selectors:[{_key:"module",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"actionCategory",_value:"*",_isDecl:!1}],_properties:{visible:{t:"SDW",v:'!properties.get("hidden")'}},_rank:0},{_selectors:[{_key:"actionCategory",_value:"General",_isDecl:!0}],_properties:{after:"zMain",label:{t:"i18n",v:{key:"a001",defVal:"General"}}},_rank:0}]},_e={oss:[{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_properties:{displayKey:"toString",searchOperation:"search"},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"trait",_value:"Searchable",_isDecl:!1}],_properties:{textSearchSupported:!0,searchOperation:"keywordSearch"},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"keywordSearch",_isDecl:!1}],_properties:{useTextIndex:!0},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"keywordSearch",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_properties:{visible:!1},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"keywordSearch",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"keywordSearch",_isDecl:!1},{_key:"field",_value:"keywords",_isDecl:!0}],_properties:{visible:{t:"OV",v:"true"},bindings:{size:30},trait:"SearchableProperty",rank:0,after:"zTop",type:"java.lang.String"},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"keywordSearch",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"textSearch",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"textSearch",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"textSearch",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"SearchableProperty",_isDecl:!1}],_properties:{visible:{t:"OV",v:"true"}},_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"textSearch",_isDecl:!1},{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1},{_key:"operation",_value:"textSearch",_isDecl:!1}],_rank:0},{_selectors:[{_key:"class",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toOneRelationship",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toOneRelationship",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"GenericChooserComponent",bindings:{destinationClass:{t:"Expr",v:"elementType"},multiselect:!1,displayKey:{t:"Expr",v:'meta.displayLabel(type, properties.get("labelField"))'},type:"Dropdown",key:{t:"Expr",v:"field"},object:{t:"Expr",v:"object"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toOneRelationship",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toManyChooser",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toManyChooser",_isDecl:!1},{_key:"editable",_value:"*",_isDecl:!1}],_properties:{component:"GenericChooserComponent",bindings:{destinationClass:{t:"Expr",v:"elementType"},multiselect:!0,displayKey:{t:"Expr",v:'meta.displayLabel(type, properties.get("labelField"))'},type:"Chooser",key:{t:"Expr",v:"field"},object:{t:"Expr",v:"object"}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toManyChooser",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1},{_key:"trait",_value:"toManyLink",_isDecl:!1}],_properties:{component:"AWHyperlink",bindings:{omitTags:{t:"Expr",v:"!value || (value.size() == 0)"},awcontent:{t:"Expr",v:'value ? ("" + value.size() + " items") : "(none)"'},action:{t:"Expr",v:'set("object", value), set("actionCategory", "General"), set("action", "Inspect"), ariba.ui.meta.core.UIMeta.getInstance().fireAction(this, requestContext)'}}},_rank:0},{_selectors:[{_key:"field",_value:"*",_isDecl:!1}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0},{_key:"trait",_value:"toOneRelationship",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0},{_key:"trait",_value:"toManyChooser",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0},{_key:"trait",_value:"toManyLink",_isDecl:!0}],_rank:0},{_selectors:[{_key:"traitGroup",_value:"RelViewers",_isDecl:!0}],_rank:0},{_selectors:[{_key:"action",_value:"Inspect",_isDecl:!1}],_properties:{pageBindings:{layout:"Inspect",clientPanel:!0,operation:"view",object:{t:"Expr",v:"object"}},visible:!0,trait:"pageAction",pageName:"MetaContentPageComponent"},_rank:0}]},ye=function(t){function m(){var e=t.call(this)||this;try{e.beginRuleSet("UIMeta"),e.registerKeyInitObserver(m.KeyClass,new be),e.defineKeyAsPropertyScope(m.KeyLayout),e.defineKeyAsPropertyScope(m.KeyModule),e.registerDefaultLabelGeneratorForKey(m.KeyClass),e.registerDefaultLabelGeneratorForKey(m.KeyField),e.registerDefaultLabelGeneratorForKey(m.KeyLayout),e.registerDefaultLabelGeneratorForKey(m.KeyModule),e.registerDefaultLabelGeneratorForKey(m.KeyAction),e.registerDefaultLabelGeneratorForKey(m.KeyActionCategory),e.registerPropertyMerger(m.KeyArea,V.PropertyMerger_DeclareList),e.registerPropertyMerger(m.KeyLayout,V.PropertyMerger_DeclareList),e.registerPropertyMerger(m.KeyModule,V.PropertyMerger_DeclareList),e.mirrorPropertyToContext(m.KeyEditing,m.KeyEditing),e.mirrorPropertyToContext(m.KeyLayout,m.KeyLayout),e.mirrorPropertyToContext(m.KeyComponentName,m.KeyComponentName),e.registerPropertyMerger(m.KeyEditing,new Q),e.keyData(m.KeyOperation).setParent("view","inspect"),e.keyData(m.KeyOperation).setParent("print","view"),e.keyData(m.KeyOperation).setParent("edit","inspect"),e.keyData(m.KeyOperation).setParent("search","inspect"),e.keyData(m.KeyOperation).setParent("keywordSearch","search"),e.keyData(m.KeyOperation).setParent("textSearch","keywordSearch"),e.registerStaticallyResolvable(m.PropFieldsByZone,new fe,m.KeyClass),e.registerStaticallyResolvable(m.PropFieldPropertyList,new me,m.KeyClass),e.registerStaticallyResolvable(m.PropLayoutsByZone,new ke,m.KeyLayout)}finally{e.endRuleSet()}return e}return l(m,t),m.getInstance=function(){return this._instance||(this._instance=new this)},m.defaultLabelForIdentifier=function(e){var t=e.lastIndexOf(".");return-1!==t&&t!==e.length-1&&(e=e.substring(t+1)),F.decamelize(e)},m.beautifyClassName=function(e){return F.decamelize(e," ")},m.beautifyFileName=function(e){return F.decamelize(e," ")},m.prototype.zones=function(e){var t=e.propertyForKey("zones");return F.isBlank(t)?V.toList(m.ZoneMain):t},m.prototype.zonePath=function(e){var t;return F.isPresent(e.values.get(m.KeyLayout))&&(e.push(),e.setScopeKey(m.KeyLayout),t=e.propertyForKey(m.KeyZonePath),e.pop()),t},m.prototype.newContext=function(e){return void 0===e&&(e=!1),new T(this,e)},m.prototype.loadDefaultRuleFiles=function(e){if(F.isPresent(ue.oss)){this.beginRuleSetWithRank(V.SystemRulePriority,"system");try{this._loadRules(ue.oss,"system",!1)}finally{this.endRuleSet()}}if(F.isPresent(_e.oss)){this.beginRuleSetWithRank(V.SystemRulePriority+2e3,"system-persistence");try{this._loadRules(_e.oss,"system-persistence",!1)}finally{this.endRuleSet()}}return F.isPresent(e)&&this.registerComponents(e),!1},m.prototype.loadApplicationRules=function(){var e,t,r,n,i=["Application"];F.isPresent(this.appConfig)&&(i=this.appConfig.get(m.AppConfigRuleFilesParam)||["Application"],t=this.appConfig.get(m.AppConfigUserRulesParam),F.ListWrapper.contains(i,"Application")||i.unshift("Application"));try{for(var o=B(i),a=o.next();!a.done;a=o.next()){var s=a.value,l=s+"Rule";if(this._testRules.has(l)){if(this._testRules.has(l)&&F.isPresent(this._testRules.get(l).oss)&&(e=this._testRules.get(l).oss,F.isPresent(e))){this.beginRuleSetWithRank(V.LowRulePriority,s.toLowerCase());try{this._loadRules(e,s.toLowerCase(),!1)}finally{this.endRuleSet()}}}else for(var c in t){var p=t[c];if(F.isPresent(p)&&F.isPresent(p[l])&&F.isPresent(p[l].oss)&&(e=p[l].oss),F.isPresent(e)){this.beginRuleSetWithRank(V.LowRulePriority,s.toLowerCase());try{this._loadRules(e,s.toLowerCase(),!1)}finally{this.endRuleSet()}}}}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}},m.prototype.loadUserRule=function(e,t){if(F.isPresent(e)){this.beginRuleSetWithRank(this._ruleCount,"user:"+t);try{this._loadRules(e,"user",!1)}finally{this.endRuleSet()}}return!1},m.prototype.defaultLabelGeneratorForKey=function(e){return new ge(e)},m.prototype.registerDerivedValue=function(e,t,r,n){var i=new Map;i.set(e,t),this.addRule(new j(V.toList(new O(r,n)),i,V.SystemRulePriority))},m.prototype.registerStaticallyResolvable=function(e,t,r){this.registerDerivedValue(e,new k(t),r,V.KeyAny)},m.prototype.registerDefaultLabelGeneratorForKey=function(e){this.registerDerivedValue(m.KeyLabel,new ve(this),e,m.KeyAny)},m.prototype.fieldList=function(e){return this.itemList(e,m.KeyField,m.ZonesTLRMB)},m.prototype.fieldsByZones=function(e){return this.itemsByZones(e,m.KeyField,m.ZonesTLRMB)},m.prototype.itemNamesByZones=function(e,t,r){var n=this.itemsByZones(e,t,r);return this.mapItemPropsToNames(n)},m.prototype.mapItemPropsToNames=function(e){var c=this,p=new Map;return F.MapWrapper.iterable(e).forEach(function(e,t){if(F.isPresent(e)&&F.isArray(e)){var r=[];try{for(var n=B(e),i=n.next();!i.done;i=n.next()){var o=i.value;o instanceof oe&&r.push(o.name)}}catch(l){a={error:l}}finally{try{i&&!i.done&&(s=n["return"])&&s.call(n)}finally{if(a)throw a.error}}p.set(t,r)}else p.set(t,c.mapItemPropsToNames(e));var a,s}),p},m.prototype.predecessorMap=function(e,t,r){var n=this.itemProperties(e,t,!1);return F.MapWrapper.groupBy(n,function(e){var t=e.properties.get(m.KeyAfter);return F.isPresent(t)?t:r})},m.prototype.itemList=function(e,t,r){var n,i,o=this.predecessorMap(e,t,r[0]),a=[];try{for(var s=B(r),l=s.next();!l.done;l=s.next()){var c=l.value;this.accumulatePrecessors(o,c,a)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=s["return"])&&i.call(s)}finally{if(n)throw n.error}}return a},m.prototype.isZoneReference=function(e){var t=e.lastIndexOf("."),r=-1===t?e:e.substring(t+1);return 1<r.length&&"z"===r[0]&&r[1].toUpperCase()===r[1]},m.prototype.itemsByZones=function(e,t,r){var n=this,i=this.predecessorMap(e,t,r[0]),o=new Map;return F.MapWrapper.iterable(i).forEach(function(e,t){if(n.isZoneReference(t)){var r=[];n.accumulatePrecessors(i,t,r),F.FieldPath.setFieldValue(o,t,r)}}),o},m.prototype.accumulatePrecessors=function(e,t,r){var n=e.get(t);if(!F.isBlank(n)){F.ListWrapper.sort(n,function(e,t){var r=e.properties.get(m.KeyRank),n=t.properties.get(m.KeyRank);return null===r&&(r=100),null===n&&(n=100),r===n?0:null===r?1:null===n?-1:r-n});try{for(var i=B(n),o=i.next();!o.done;o=i.next()){var a=o.value;a.hidden||r.push(a),this.accumulatePrecessors(e,a.name,r)}}catch(c){s={error:c}}finally{try{o&&!o.done&&(l=i["return"])&&l.call(i)}finally{if(s)throw s.error}}var s,l}},m.prototype.addPredecessorRule=function(e,t,r,n,i){if(F.isBlank(r)&&F.isBlank(n))return null;var o=this.scopeKeyForSelector(t);(F.isBlank(o)||o===m.KeyClass)&&(o=m.KeyField);var a=new Array;F.ListWrapper.addAll(a,t),a.push(new O(o,e));var s=new Map;F.isPresent(r)&&s.set(m.KeyAfter,r),F.isPresent(n)&&s.set(m.KeyTrait,n);var l=new j(a,s,0,i);return this.addRule(l),l},m.prototype.flattenVisible=function(e,t,r,n){var i,o,a,s,l=[];if(F.isPresent(e))try{for(var c=B(t),p=c.next();!p.done;p=c.next()){var u=p.value,_=e.get(u);if(!F.isBlank(_))try{for(var y=B(_),h=y.next();!h.done;h=y.next()){var d=h.value;n.push(),n.set(r,d),n.booleanPropertyForKey(m.KeyVisible,!1)&&l.push(d),n.pop()}}catch(v){a={error:v}}finally{try{h&&!h.done&&(s=y["return"])&&s.call(y)}finally{if(a)throw a.error}}}}catch(f){i={error:f}}finally{try{p&&!p.done&&(o=c["return"])&&o.call(c)}finally{if(i)throw i.error}}return l},m.prototype.displayKeyForClass=function(e){var t=this.newContext();t.set(m.KeyLayout,"LabelField"),t.set(m.KeyClass,e);var r=this.itemProperties(t,m.KeyField,!0);return F.ListWrapper.isEmpty(r)?"$toString":r[0].name},m.prototype.displayLabel=function(e,t){return F.isPresent(t)?t:this.displayKeyForClass(e)},m.prototype.createLocalizedString=function(e,t){return F.assert(F.isPresent(this._currentRuleSet),"Attempt to create localized string without currentRuleSet in place"),new de(this,this._currentRuleSet.filePath,e,t)},Object.defineProperty(m.prototype,"routingService",{get:function(){return F.isPresent(this._injector)?this._injector.get(F.RoutingService):null},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"env",{get:function(){return F.isPresent(this._injector)?this._injector.get(F.Environment):new F.Environment},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"appConfig",{get:function(){return F.isPresent(this._injector)?this._injector.get(F.AppConfig):null},enumerable:!0,configurable:!0}),m.prototype.registerComponents=function(e){if(F.assert(F.isPresent(this.injector),"Cannot register components without Injector in order to get access to ComponentRegistry Service"),F.assert(this.env.inTest||F.isPresent(this.appConfig.get(m.AppConfigUserRulesParam)),"Unable to initialize MetaUI as user rules are missing. please use: metaui.rules.user-rules configuration param"),this.componentRegistry=this.injector.get(_.ComponentRegistry),F.isPresent(this.componentRegistry)){if(this.componentRegistry.registerTypes(e),!this.env.inTest){var t=this.appConfig.get(m.AppConfigUserRulesParam);try{for(var r=B(t),n=r.next();!n.done;n=r.next()){var i=n.value;this.componentRegistry.registerTypes(i)}}catch(s){o={error:s}}finally{try{n&&!n.done&&(a=r["return"])&&a.call(r)}finally{if(o)throw o.error}}this.loadApplicationRules()}}else this.env.inTest||F.warn("UIMeta.registerComponents() No components were registered !");var o,a},m.prototype.fireActionFromProps=function(e,t){t.push();var r=e.properties.get(ae.KeyActionCategory);F.isBlank(r)&&(r=ae.DefaultActionCategory),t.set(ae.KeyActionCategory,r),t.set(ae.KeyAction,e.name),this._fireAction(t,!1),t.pop()},m.prototype.fireAction=function(e,t){void 0===t&&(t=!1),e.push(),this._fireAction(e,t),e.pop()},m.prototype._fireAction=function(e,t){var r=e.propertyForKey("actionResults");!F.isBlank(r)&&this.isRoute(r)&&this.naviateToPage(e,r,t)},m.prototype.naviateToPage=function(e,t,r){var n=this.prepareRoute(e,r),i=e;this.routingService.navigateWithRoute(t,n,i.object)},m.prototype.prepareRoute=function(r,e){var n={},t=r.propertyForKey("pageBindings");return F.isPresent(t)&&(t.forEach(function(e,t){t!==ae.KeyObject&&(n[t]=r.resolveValue(e))}),F.isPresent(e)&&(n.b=e)),n},m.prototype.prepareRouteForComponent=function(r,e,t){var n=e.propertyForKey("pageBindings");return F.isPresent(n)&&n.forEach(function(e,t){r[t]=e}),{}},m.prototype.gotoModule=function(e,t){this.env.deleteValue(De);var r=this.newContext();r.push(),r.set(m.KeyModule,e.name);var n=r.propertyForKey(m.KeyHomePage),i=this.routingService.routeForPage(n,e.name.toLowerCase(),t);"/"===t&&(t="");var o=t+"/"+i.path,a=this.prepareRoute(r,null);r.pop(),this.routingService.navigate([o,a],{skipLocationChange:!0})},m.prototype.isRoute=function(e){return F.isStringMap(e)&&F.isPresent(e.path)},m.prototype.compPageWithName=function(e){var t=this.componentRegistry.nameToType.get(e);if(!F.isBlank(t))return t;F.assert(!1,e+" component does not exists. Create Dummy Component instead of throwing this error")},m.prototype.actionsByCategory=function(e,t,r){var n=[],i=this.itemList(e,ae.KeyActionCategory,r);return F.isPresent(i)&&i.forEach(function(e){return n.push(e.name)}),this.addActionsForCategories(e,t,n),i},m.prototype.addActionsForCategories=function(e,t,r){try{for(var n=B(r),i=n.next();!i.done;i=n.next()){var o=i.value;e.push(),o!==ae.DefaultActionCategory&&e.set(ae.KeyActionCategory,o),this.collectActionsByCategory(e,t,o),e.pop()}}catch(l){a={error:l}}finally{try{i&&!i.done&&(s=n["return"])&&s.call(n)}finally{if(a)throw a.error}}var a,s},m.prototype.collectActionsByCategory=function(e,t,r){var n,i,o=this.itemProperties(e,ae.KeyAction,!0);try{for(var a=B(o),s=a.next();!s.done;s=a.next()){var l=s.value;e.push(),e.set(ae.KeyAction,l.name);var c=e.booleanPropertyForKey(ae.KeyVisible,!0);if(e.pop(),c){var p=l.properties.get(ae.KeyActionCategory);if(null==p&&(p=ae.DefaultActionCategory),r!==p)continue;var u=t.get(p);F.isBlank(u)&&(u=[],t.set(p,u)),u.push(l)}}}catch(_){n={error:_}}finally{try{s&&!s.done&&(i=a["return"])&&i.call(a)}finally{if(n)throw n.error}}},m.prototype.computeModuleInfo=function(e,t){void 0===e&&(e=this.newContext()),void 0===t&&(t=!0);var r=new he;r.modules=[];var n,i,o=this.itemList(e,m.KeyModule,m.ActionZones);r.moduleNames=[],r.moduleByNames=new Map;try{for(var a=B(o),s=a.next();!s.done;s=a.next()){var l=s.value;if(e.push(),e.set(m.KeyModule,l.name),!t||e.booleanPropertyForKey(m.KeyVisible,!0)){r.moduleNames.push(l.name);var c=new oe(l.name,e.allProperties(),!1);r.modules.push(c),r.moduleByNames.set(l.name,c),e.pop()}else e.pop()}}catch(p){n={error:p}}finally{try{s&&!s.done&&(i=a["return"])&&i.call(a)}finally{if(n)throw n.error}}return e.push(),e.set(m.KeyModule,r.moduleNames),r.actionsByCategory=new Map,r.actionCategories=this.actionsByCategory(e,r.actionsByCategory,m.ModuleActionZones),e.pop(),r},m.prototype.currentModuleLabel=function(e,t){void 0===t&&(t=this.newContext()),t.push(),t.set(m.KeyModule,e);var r=t.propertyForKey(m.KeyLabel);return t.pop(),r},m.KeyOperation="operation",m.KeyModule="module",m.KeyLayout="layout",m.KeyArea="area",m.KeyEditing="editing",m.KeyAfter="after",m.KeyHidden="hidden",m.KeyLabel="label",m.KeyComponentName="component",m.KeyBindings="bindings",m.KeyHomePage="homePage",m.KeyZonePath="zonePath",m.PropFieldsByZone="fieldsByZone",m.PropIsFieldsByZone="fiveZoneLayout",m.PropActionsByCategory="actionsByCategory",m.PropActionCategories="actionCategories",m.PropFieldPropertyList="fieldPropertyList",m.PropLayoutsByZone="layoutsByZone",m.KeyWrapperComponent="wrapperComponent",m.KeyWrapperBinding="wrapperBindings",m.RootPredecessorKey="_root",m.ZoneMain="zMain",m.ZoneTop="zTop",m.ZoneLeft="zLeft",m.ZoneMiddle="zMiddle",m.ZoneRight="zRight",m.ZoneBottom="zBottom",m.ZoneDetail="zDetail",m.AppConfigRuleFilesParam="metaui.rules.file-names",m.AppConfigUserRulesParam="metaui.rules.user-rules",m.ZonesTLRMB=[m.ZoneTop,m.ZoneLeft,m.ZoneMiddle,m.ZoneRight,m.ZoneBottom],m.ZonesMTLRB=[m.ZoneMain,m.ZoneTop,m.ZoneLeft,m.ZoneRight,m.ZoneBottom],m.ZonesDetail=[m.ZoneDetail],m._instance=null,m.ModuleActionZones=["zNav","zGlobal"],m.ActionZones=["zGlobal","zMain","zGeneral"],m}(ae),he=function tt(){},de=function(o){function e(e,t,r,n){var i=o.call(this)||this;return i.meta=e,i._module=t,i._key=r,i._defaultValue=n,i}return l(e,o),e.prototype.evaluate=function(e){return this._defaultValue},e.prototype.toString=function(){return"LocaledString: {"+this._key+" - "+this._defaultValue+" }"},e}(v),ve=function(n){function r(e){var t=n.call(this,e,r.DefaultModule,null,null)||this;return t.meta=e,t.propertyAwaking=!0,t}return l(r,n),r.prototype.evaluate=function(e){if(F.isBlank(this._key)){var t=e.values.get(V.ScopeKey),r=e.values.get(t);this._defaultValue=ye.defaultLabelForIdentifier(r),this._key=t}return n.prototype.evaluate.call(this,e)},r.prototype.awakeForPropertyMap=function(e){return new r(this.meta)},r.DefaultModule="default",r}(de),fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.evaluate=function(e){var t=e.meta.itemNamesByZones(e,ye.KeyField,e.meta.zones(e)),r=e.meta.zonePath(e);return F.isPresent(r)&&(t=F.FieldPath.getFieldValue(t,r),F.isBlank(t)&&(t=new Map)),t},t}(f),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.evaluate=function(e){return e.meta.fieldList(e)},t}(f),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.evaluate=function(e){return e.meta.itemNamesByZones(e,ye.KeyLayout,e.meta.zones(e))},t}(f),ge=function(r){function e(e){var t=r.call(this)||this;return t._key=e,t}return l(e,r),e.prototype.evaluate=function(e){var t=e.values.get(this._key);return F.isPresent(t)&&F.isString(t)?ye.defaultLabelForIdentifier(t):null},e}(f),be=function(){function e(){}return e.prototype.notify=function(e,t,r){var n,i=e;if(i._testRules.has(r+"Rule"))i._testRules.has(r+"Rule")&&F.isPresent(i._testRules.get(r+"Rule").oss)&&(n=i._testRules.get(r+"Rule").oss),e.loadUserRule(n,r);else if(F.isPresent(i.appConfig)&&i.appConfig.get(ye.AppConfigUserRulesParam)){var o=i.appConfig.get(ye.AppConfigUserRulesParam);for(var a in o)F.isPresent(o[a][r+"Rule"])&&F.isPresent(o[a][r+"Rule"].oss)&&(n=o[a][r+"Rule"].oss);e.loadUserRule(n,r)}},e}(),De="CurrentMC",Ce=["module","layout","operation","class","object","actionCategory","action","field","pushNewContext"],Pe=["module","layout","operation","class","action","field","pushNewContext"],xe=function(i){function e(e,t,r){var n=i.call(this,t,null)||this;return n.elementRef=e,n.env=t,n.parentContainer=r,n.beforeContextSet=new o.EventEmitter,n.onContextChanged=new o.EventEmitter,n.afterContextSet=new o.EventEmitter,n.onAction=new o.EventEmitter,n.viewInitialized=!1,n.contextCreated=!1,n.bindingKeys=[],n}return l(e,i),e.prototype.ngOnInit=function(){this.initBindings(),this.hasObject=this._hasObject(),this.pushPop(!0),this.env.hasValue("parent-cnx")||this.env.setValue("parent-cnx",this)},e.prototype.ngOnChanges=function(e){try{for(var t=B(Pe),r=t.next();!r.done;r=t.next()){var n=r.value;if(F.isPresent(e[n])&&e[n].currentValue!==e[n].previousValue){this.initBindings();break}}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t["return"])&&o.call(t)}finally{if(i)throw i.error}}var i,o;this.viewInitialized&&F.isPresent(e.object)&&F.isPresent(this.object)&&this.initBindings()},e.prototype.ngDoCheck=function(){this.viewInitialized&&(this.hasObject=this._hasObject(),this.pushPop(!0),F.isPresent(this.object)&&!F.equals(this.prevObject,this.object)&&this.updateModel())},e.prototype.ngAfterViewInit=function(){this.viewInitialized||this.pushPop(!1)},e.prototype.ngAfterViewChecked=function(){this.viewInitialized?this.pushPop(!1):this.viewInitialized=!0},e.prototype.pushPop=function(e){var t=this.activeContext();F.assert(e||F.isPresent(t),"pop(): Missing context");var r=e&&F.isPresent(this.pushNewContext)&&this.pushNewContext;(F.isBlank(t)||r)&&(t=ye.getInstance().newContext(r),this.contextCreated=!0,this.env.push(De,t));if(e){if(t.push(),F.isPresent(this._scopeBinding)&&this.hasObject)this.beforeContextSet.emit(this._scopeBinding),t.setScopeKey(this._scopeBinding),this.afterContextSet.emit(this._scopeBinding);else for(var n=0;n<this.bindingKeys.length;n++){var i=this.bindingKeys[n],o=this.bindingsMap.get(i);this.beforeContextSet.emit(o),t.set(i,o),this.afterContextSet.emit(o)}this._myContext=t.snapshot().hydrate(!1)}else t.pop(),this.contextCreated&&this.env.pop(De)},e.prototype.debugString=function(){if(F.isPresent(this._myContext))return this._myContext.debugString()},e.prototype.myContext=function(){return this._myContext},e.prototype.activeContext=function(){return this.env.peak(De)},e.prototype.ngOnDestroy=function(){this.env.hasValue("parent-cnx")&&this.env.deleteValue("parent-cnx")},e.prototype.initBindings=function(){var r=this;this.bindingsMap=new Map;var e=this.elementRef.nativeElement;this.initImplicitBindings();for(var t=0;t<e.attributes.length;t++){var n=e.attributes.item(t);this.ignoreBinding(n)||(F.isPresent(n.name)&&"scopekey"===n.name.toLowerCase()?this._scopeBinding=n.value:this.bindingsMap.set(n.name,n.value))}this.bindingKeys=[],this.bindingsMap.forEach(function(e,t){r.bindingKeys.push(t)}),F.ListWrapper.sortByExample(this.bindingKeys,Ce)},e.prototype.initImplicitBindings=function(){F.isPresent(this.module)&&this.bindingsMap.set("module",this.module),F.isPresent(this.layout)&&this.bindingsMap.set("layout",this.layout),F.isPresent(this.operation)&&this.bindingsMap.set("operation",this.operation),F.isPresent(this["class"])&&this.bindingsMap.set("class",this["class"]),F.isPresent(this.object)&&(this.bindingsMap.set("object",this.object),this.prevObject=Object.assign({},this.object)),F.isPresent(this.actionCategory)&&this.bindingsMap.set("actionCategory",this.actionCategory),F.isPresent(this.action)&&this.bindingsMap.set("action",this.action),F.isPresent(this.field)&&this.bindingsMap.set("field",this.field)},e.prototype.ignoreBinding=function(e){return-1!==Ce.indexOf(e.name)||F.StringWrapper.contains(e.name,"_ng")||F.StringWrapper.contains(e.name,"ng-")||F.StringWrapper.contains(e.name,"(")||F.isBlank(e.value)||0===e.value.length},e.prototype.updateModel=function(){var r=this;Object.keys(this.object).forEach(function(e){var t=r.formGroup.get(e);F.isPresent(t)&&t.patchValue(r.object[e],{onlySelf:!1,emitEvent:!0})}),this.prevObject=Object.assign({},this.object)},e.prototype._hasObject=function(){var e=this.activeContext();return!!F.isPresent(e)&&F.isPresent(e.object)},e.decorators=[{type:o.Component,args:[{selector:"m-context",template:"<ng-content></ng-content>",changeDetection:o.ChangeDetectionStrategy.OnPush,providers:[{provide:_.BaseFormComponent,useExisting:o.forwardRef(function(){return e})}]}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:F.Environment},{type:_.BaseFormComponent,decorators:[{type:o.SkipSelf},{type:o.Optional},{type:o.Inject,args:[o.forwardRef(function(){return _.BaseFormComponent})]}]}]},e.propDecorators={module:[{type:o.Input}],layout:[{type:o.Input}],operation:[{type:o.Input}],"class":[{type:o.Input}],object:[{type:o.Input}],actionCategory:[{type:o.Input}],action:[{type:o.Input}],field:[{type:o.Input}],pushNewContext:[{type:o.Input}],beforeContextSet:[{type:o.Output}],onContextChanged:[{type:o.Output}],afterContextSet:[{type:o.Output}],onAction:[{type:o.Output}]},e}(_.BaseFormComponent),Me=function rt(e,t,r,n){this.component=e,this.eventName=t,this.cnxName=r,this.data=n},Se=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{declarations:[xe],imports:[t.CommonModule,i.FormsModule,i.ReactiveFormsModule],entryComponents:[xe],exports:[xe,i.ReactiveFormsModule,i.FormsModule],providers:[]}]}],e}(),we=function(){function e(){}return Object.defineProperty(e.prototype,"uiMeta",{get:function(){return this._uiMeta},set:function(e){this._uiMeta=e},enumerable:!0,configurable:!0}),e.prototype.loadRules=function(e,t,n,i){var o=this;this._uiMeta=e,t.forEach(function(e,t){var r=o.readRule(e,n);F.isPresent(i)&&i(r)})},e.prototype.loadRulesWithReturn=function(e,n){var i=this,o=new Array;return e.forEach(function(e,t){var r=i.readRule(e,n);o.push(r)}),o},e.prototype.readRule=function(e,r){var n=this,t=new Array;try{for(var i=B(e._selectors),o=i.next();!o.done;o=i.next()){var a=o.value;F.isPresent(a._value)&&a._value.constructor===Object&&0===Object.keys(a._value).length&&(a._value=V.NullMarker);var s=new O(a._key,a._value,a._isDecl);t.push(s)}}catch(_){l={error:_}}finally{try{o&&!o.done&&(c=i["return"])&&c.call(i)}finally{if(l)throw l.error}}var l,c,p=F.MapWrapper.createFromStringMapWithResolve(e._properties,function(e,t){return F.isStringMap(t)&&F.isPresent(t.t)?n.resoveValue(t.t,t,r):F.isStringMap(t)&&!F.isArray(t)?F.MapWrapper.createFromStringMapWithResolve(t,function(e,t){return n.resoveValue(t.t,t,r)}):F.isArray(t)?F.ListWrapper.clone(t):t}),u=0===p.size?undefined:p;return new j(t,u,e._rank)},e.prototype.resoveValue=function(e,t,r){if(F.isBlank(t))return null;if("Expr"===e)return new C(t.v);if("SDW"===e){var n=new C(t.v);return new k(new m(n))}if("CFP"===e)return new g(t.v);if("OV"===e)return new G(t.v);if("i18n"===e&&t.v.key){var i=t.v.key;return F.isPresent(this._uiMeta)?this._uiMeta.createLocalizedString(i,t.v.defVal):new de(null,r,i,t.v.defVal)}return t},e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[]},e}(),Ae=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:o.Component,args:[{selector:"app-no-meta",template:"\n        <h2>MetaIncludeComponentDirective Error:</h2>\n                No componentName property resolved in Context<br/>\n    ",styles:[""]}]}],e.ctorParameters=function(){return[]},e}(),Ke=function(p){function u(e,t,r,n,i,o,a){var s=p.call(this,t,r,i,o)||this;return s.metaContext=e,s.viewContainer=t,s.factoryResolver=r,s.env=n,s.cd=i,s.compRegistry=o,s.domUtils=a,s}return l(u,p),u.prototype.ngDoCheck=function(){var e=this.metaContext.myContext();if(!F.isBlank(e)&&!F.isBlank(this.currentComponent)){var t=e.propertyForKey("component");if(F.isPresent(t)&&F.isPresent(this.name)&&this.name!==t)this.viewContainer.clear(),this.doRenderComponent(),this.createWrapperElementIfAny(),this.createContentElementIfAny();else{var r=e.propertyForKey(ae.KeyEditable);F.isBlank(r)&&(r=e.propertyForKey(ye.KeyEditing));var n=e.propertyForKey(ye.KeyBindings),i=e.propertyForKey(ae.KeyType),o=this.componentReference().metadata.inputs;F.isPresent(n)&&F.isPresent(o)&&this.applyInputs(this.currentComponent,i,n,o,r)}}},u.prototype.resolveComponentType=function(){return this.name=this.metaContext.myContext().propertyForKey(ye.KeyComponentName),F.isBlank(this.name)?Ae:p.prototype.resolveComponentType.call(this)},u.prototype.ngContent=function(){var e,t=this.metaContext.myContext().propertyForKey(ye.KeyBindings);return F.isPresent(t)&&F.isPresent(e=t.get(_.IncludeComponentDirective.NgContent))&&(e=F.isString(e)?e:this.metaContext.myContext().resolveValue(e)),e},u.prototype.ngContentElement=function(){var e,t=this.metaContext.myContext().propertyForKey(ye.KeyBindings);return F.isPresent(t)&&F.isPresent(e=t.get(_.IncludeComponentDirective.NgContentElement))&&(e=F.isString(e)?e:this.metaContext.myContext().resolveValue(e)),e},u.prototype.createContentElementIfAny=function(){var e=!1,t=this.metaContext.myContext().propertyForKey(ye.KeyBindings);if(F.isPresent(t)&&t.has(u.NgContentLayout)){var r=t.get(u.NgContentLayout),n=this.metaContext.myContext();n.push(),n.set(ye.KeyLayout,r);var i=n.propertyForKey("component"),o=this.compRegistry.nameToType.get(i),a=this.factoryResolver.resolveComponentFactory(o),s=this.resolveDirective(a),l=this.viewContainer.createComponent(a,0),c={metadata:s,resolvedCompFactory:a,componentType:o,componentName:i};this.applyBindings(c,l,n.propertyForKey(ye.KeyBindings),!1),this.domUtils.insertIntoParentNgContent(this.currentComponent.location.nativeElement,l.location.nativeElement),n.pop(),e=!0}else e=p.prototype.createContentElementIfAny.call(this);return e&&this.cd.detectChanges(),e},u.prototype.createWrapperElementIfAny=function(){var e=this.metaContext.myContext().propertyForKey(ye.KeyWrapperComponent);if(!F.isBlank(e)){var t=this.compRegistry.nameToType.get(e),r=this.factoryResolver.resolveComponentFactory(t),n=this.resolveDirective(t),i=this.viewContainer.createComponent(r),o=this.metaContext.myContext().propertyForKey(ye.KeyWrapperBinding);i.instance.bindings=o;var a={metadata:n,resolvedCompFactory:r,componentType:t,componentName:e};this.applyBindings(a,i,o),this.domUtils.insertIntoParentNgContent(i.location.nativeElement,this.currentComponent.location.nativeElement)}},u.prototype.applyBindings=function(e,t,r,n){void 0===n&&(n=!0),p.prototype.applyBindings.call(this,e,t,r);var i=e.metadata.inputs,o=e.metadata.outputs,a=this.metaContext.myContext().propertyForKey(ye.KeyBindings),s=this.metaContext.myContext().propertyForKey(ae.KeyEditable),l=this.metaContext.myContext().propertyForKey(ae.KeyType);if(n||(a=r),!F.isBlank(a)&&!F.isBlank(i)){var c=F.MapWrapper.clone(a);this.applyInputs(t,l,c,i,s),this.applyOutputs(t,c,o)}},u.prototype.applyInputs=function(e,t,r,n,i,o){void 0===o&&(o=!0),F.isPresent(t)&&F.isPresent(e.instance.canSetType)&&e.instance.canSetType()&&r.set(ae.KeyType,t),F.isPresent(i)&&F.isPresent(e.instance.editable)&&(e.instance.editable=i);try{for(var a=B(n),s=a.next();!s.done;s=a.next()){var l=s.value,c=F.nonPrivatePrefix(l),p=r.get(c);if("name"===l&&F.isBlank(p)&&(p=this.metaContext.myContext().propertyForKey(ae.KeyField)),!this.skipInput(l,p))if(o&&p instanceof g)this.applyDynamicInputBindings(e.instance,r,n,l,p,i);else if(o&&p instanceof v){var u=p.evaluate(this.metaContext.myContext());e.instance[c]=u}else F.equals(e.instance[c],p)||(e.instance[c]=p)}}catch(h){_={error:h}}finally{try{s&&!s.done&&(y=a["return"])&&y.call(a)}finally{if(_)throw _.error}}var _,y},u.prototype.skipInput=function(e,t){return F.isBlank(t)||e===_.IncludeComponentDirective.NgContent||e===u.NgContentLayout},u.prototype.applyOutputs=function(i,o,e){var t,r,a=this,n=function(e){var n=F.nonPrivatePrefix(e),t=o.get(n);if(e===_.IncludeComponentDirective.NgContent)return"continue";var r=i.instance[n];t instanceof v?s.applyDynamicOutputBinding(r,t,s.metaContext.myContext()):r.subscribe(function(e){if(a.env.hasValue("parent-cnx")){var t=e,r=a.env.getValue("parent-cnx");e instanceof Me||(t=new Me(i.instance,n,n,e)),r.onAction.emit(t)}})},s=this;try{for(var l=B(e),c=l.next();!c.done;c=l.next()){n(c.value)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=l["return"])&&r.call(l)}finally{if(t)throw t.error}}},u.prototype.applyDynamicOutputBinding=function(e,r,n){e.asObservable().subscribe(function(e){var t=r;n.resolveValue(t)})},u.prototype.applyDynamicInputBindings=function(n,e,t,r,i,o){var a=this,s=F.nonPrivatePrefix(r),l=i;this.metaContext;Object.defineProperty(n,s,{get:function(){var e=a.metaContext.myContext();return l.evaluate(e)},set:function(e){var t=a.metaContext.myContext();if((t.propertyForKey(ae.KeyEditable)||t.propertyForKey(ye.KeyEditing))&&!F.StringWrapper.equals(e,n[s])){var r=t.propertyForKey(ae.KeyType);l.evaluateSet(t,x.value(r,e))}},enumerable:!0,configurable:!0})},u.FormatterBinding="formatter",u.NgContentLayout="ngcontentLayout",u.decorators=[{type:o.Directive,args:[{selector:"m-include-component"}]}],u.ctorParameters=function(){return[{type:xe,decorators:[{type:o.Inject,args:[o.forwardRef(function(){return xe})]}]},{type:o.ViewContainerRef},{type:o.ComponentFactoryResolver},{type:F.Environment},{type:o.ChangeDetectorRef},{type:_.ComponentRegistry},{type:_.DomUtilsService}]},u.propDecorators={context:[{type:o.Input}]},u}(_.IncludeComponentDirective),Fe=function(){function e(e){this.environment=e}return e.decorators=[{type:o.Component,args:[{selector:"m-form",template:'<m-context #cnx scopeKey="class">\n    \x3c!-- Dont try to render if the object is not set yet --\x3e\n    <m-form-table *ngIf="cnx.hasObject"></m-form-table>\n</m-context>\n'}]}],e.ctorParameters=function(){return[{type:F.Environment}]},e}(),Be=function(n){function e(e,t){var r=n.call(this,e,t)||this;return r.env=e,r._metaContext=t,r}return l(e,n),e.prototype.ngOnInit=function(){n.prototype.ngOnInit.call(this),this.updateMeta()},e.prototype.ngDoCheck=function(){this.updateMeta()},e.prototype.ngAfterViewChecked=function(){},e.prototype.updateMeta=function(){this.editing=this.context.booleanPropertyForKey(ye.KeyEditing,!1),this.editing&&(this.object=this.context.values.get(ae.KeyObject),this.contextSnapshot=this.context.snapshot()),this.doUpdate()},e.prototype.doUpdate=function(){},Object.defineProperty(e.prototype,"context",{get:function(){if(F.isPresent(this._metaContext)&&F.isPresent(this._metaContext.myContext()))return this._metaContext.myContext();F.assert(!1,"Should always have metaContext available")},enumerable:!0,configurable:!0}),e.prototype.isNestedContext=function(){return this.context.isNested},e.prototype.properties=function(e,t){return void 0===t&&(t=null),F.isPresent(this.context)&&F.isPresent(this.context.propertyForKey(e))?this.context.propertyForKey(e):t},e.prototype.aProperties=function(e,t,r){void 0===r&&(r=null);this._metaContext.activeContext();return F.isPresent(e)?e.propertyForKey(t):r},e}(_.BaseFormComponent),Re=function(n){function e(e,t){var r=n.call(this,t,e)||this;return r._context=e,r.env=t,r}return l(e,n),e.prototype.canShowZone=function(e){return F.isPresent(this.fieldsByZone)&&this.fieldsByZone.has(e)},e.prototype.doUpdate=function(){n.prototype.doUpdate.call(this),this.fieldsByZone=this.context.propertyForKey(ye.PropFieldsByZone),this.isFiveZoneLayout=this.context.propertyForKey(ye.PropIsFieldsByZone);var e=this.context.propertyForKey(ye.KeyBindings);F.isPresent(e)&&(this.showLabelsAboveControls=e.get("showLabelsAboveControls"),F.isBlank(this.showLabelsAboveControls)&&(this.showLabelsAboveControls=!1)),this.initForm()},e.prototype.zLeft=function(){return this.fieldsByZone.get(ye.ZoneLeft)},e.prototype.zMiddle=function(){return this.fieldsByZone.get(ye.ZoneMiddle)},e.prototype.zRight=function(){return this.fieldsByZone.get(ye.ZoneRight)},e.prototype.zTop=function(){return this.fieldsByZone.get(ye.ZoneTop)},e.prototype.zBottom=function(){return this.fieldsByZone.get(ye.ZoneBottom)},e.prototype.initForm=function(){var t=this;F.isPresent(this.form)&&(this.form.editable=this.editable);var r=this.context.object;Object.keys(this.formGroup.value).length!==Object.keys(r).length&&Object.keys(r).forEach(function(e){t.doRegister(e,r[e])})},e.decorators=[{type:o.Component,args:[{selector:"m-form-table",template:'<ng-template [ngIf]="isFiveZoneLayout">\n\n    <aw-form-table #metaFormTable [editable]="editing" [useFiveZone]="isFiveZoneLayout"\n                   [omitPadding]="isNestedContext()"\n                   [editabilityCheck]="false"\n                   [labelsOnTop]="showLabelsAboveControls">\n\n\n        <aw-top *ngIf="canShowZone(\'zTop\')">\n            <ng-template ngFor let-curentField [ngForOf]="zTop()">\n                <m-context [field]="curentField">\n                    <m-form-row [field]="curentField" [editable]="editing"\n                                [initialSize]="\'x-large\'"></m-form-row>\n                </m-context>\n            </ng-template>\n        </aw-top>\n\n\n        <aw-left *ngIf="canShowZone(\'zLeft\')">\n\n            <ng-template ngFor let-curentField [ngForOf]="zLeft()">\n                <m-context [field]="curentField">\n                    <m-form-row [field]="curentField" [editable]="editing"></m-form-row>\n                </m-context>\n            </ng-template>\n        </aw-left>\n\n\n        <aw-middle *ngIf="canShowZone(\'zMiddle\')">\n            <ng-template ngFor let-curentField [ngForOf]="zMiddle()">\n                <m-context [field]="curentField">\n                    <m-form-row [field]="curentField" [editable]="editing"></m-form-row>\n                </m-context>\n            </ng-template>\n        </aw-middle>\n\n        <aw-right *ngIf="canShowZone(\'zRight\')">\n            <ng-template ngFor let-curentField [ngForOf]="zRight()">\n                <m-context [field]="curentField">\n                    <m-form-row [field]="curentField" [editable]="editing"></m-form-row>\n                </m-context>\n            </ng-template>\n        </aw-right>\n\n\n        <aw-bottom *ngIf="canShowZone(\'zBottom\')">\n            <ng-template ngFor let-curentField [ngForOf]="zBottom()">\n                <m-context [field]="curentField">\n                    <m-form-row [field]="curentField" [editable]="editing"\n                                [initialSize]="\'x-large\'"></m-form-row>\n                </m-context>\n            </ng-template>\n        </aw-bottom>\n    </aw-form-table>\n</ng-template>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:xe,decorators:[{type:o.Host}]},{type:F.Environment}]},e.propDecorators={form:[{type:o.ViewChild,args:["metaFormTable"]}]},e}(Be),Le=function(n){function e(e,t){var r=n.call(this,t,e)||this;return r._metaContext=e,r.env=t,r.initialSize="medium",r}return l(e,n),e.prototype.ngOnInit=function(){n.prototype.ngOnInit.call(this),this.validators=this.createValidators()},e.prototype.bindingBoolProperty=function(e){var t=this.context.propertyForKey(ye.KeyBindings);if(F.isPresent(t)&&t.has(e)){var r=t.get(e);return F.BooleanWrapper.boleanValue(r)}return!1},e.prototype.bindingStringProperty=function(e){var t=this.context.propertyForKey(ye.KeyBindings);return F.isPresent(t)&&t.has(e)?t.get(e):null},Object.defineProperty(e.prototype,"size",{get:function(){var e=this.context.propertyForKey(ye.KeyBindings);return F.isPresent(e)&&e.has("size")?e.get("size"):this.initialSize},set:function(e){this.initialSize=e},enumerable:!0,configurable:!0}),e.prototype.createValidators=function(){var r=this;return[function(e){if(F.isPresent(i.Validators.required(e))||!e.touched)return null;var t=ye.validationError(r.context);return F.isPresent(t)?{metavalid:{msg:t}}:null}]},e.prototype.isRequired=function(){return F.isPresent(this.editing)&&this.context.booleanPropertyForKey("required",!1)},e.decorators=[{type:o.Component,args:[{selector:"m-form-row",template:'<aw-form-row\n    [editable]="editable"\n    [customValidators]="validators"\n    [isNestedLayout]="properties(\'nestedLayout\', false)"\n    [size]="size"\n    [hidden]="!properties(\'visible\')"\n    [styleClass]="bindingStringProperty(\'styleClass\')"\n    [name]="properties(\'field\')"\n    [required]="isRequired()"\n    [label]="properties(\'label\')"\n    [noLabelLayout]="bindingBoolProperty(\'useNoLabelLayout\')">\n\n    <m-include-component></m-include-component>\n</aw-form-row>\n\n',providers:[{provide:_.FormRowComponent,useExisting:o.forwardRef(function(){return e})}],styles:[""]}]}],e.ctorParameters=function(){return[{type:xe,decorators:[{type:o.Host}]},{type:F.Environment}]},e.propDecorators={field:[{type:o.Input}],initialSize:[{type:o.Input}]},e}(Be),Ie=function(){function e(e,t){this.route=e,this.routingService=t,this.newContext=!0,this.isInspectAction=!1,this.okLabel="Back"}return e.prototype.ngOnInit=function(){this.layout=this.route.snapshot.params.layout,this.operation=this.route.snapshot.params.operation;var e="/"+this.route.snapshot.url[0].toString();this.routingService.stateCacheHistory.has(e)&&(this.object=this.routingService.stateCacheHistory.get(e),this.objectName=ye.defaultLabelForIdentifier(this.object.constructor.name));var t=this.route.snapshot.params.b;F.isPresent(t)&&F.BooleanWrapper.isTrue(t)&&(this.isInspectAction=!0)},e.prototype.onBack=function(e){this.routingService.goBack()},e.decorators=[{type:o.Component,args:[{selector:"m-content-page",template:'\x3c!-- TODO: impplement dynamic title based on the operation and object as well as updates buttons--\x3e\n\n<m-context [pushNewContext]="newContext" [object]="object" [operation]="operation"\n           [layout]="layout">\n\n    <aw-basic-navigator (onOKAction)="onBack($event)" [okActionLabel]="okLabel"\n                        [showCancelButton]="!isInspectAction">\n\n\n        <div class="page-container ">\n            <br/>\n            <h3>{{objectName}} details:</h3>\n\n            <m-include-component></m-include-component>\n        </div>\n    </aw-basic-navigator>\n\n</m-context>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:r.ActivatedRoute},{type:F.RoutingService}]},e}(),Ee=function(n){function e(e,t){var r=n.call(this,t,e)||this;return r._metaContext=e,r.env=t,r.nameToLayout=new Map,r.contextMap=new Map,r}return l(e,n),e.prototype.afterContextSet=function(e){this.layoutContext=this.activeContext,this.contextMap.set(e,this.layoutContext.snapshot().hydrate(!1))},e.prototype.beforeContextSet=function(e){this.layout=this.nameToLayout.get(e)},Object.defineProperty(e.prototype,"activeContext",{get:function(){return this._metaContext.activeContext()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allLayouts",{get:function(){var t=this;if(F.isBlank(this._allLayouts)){var e=this.activeContext.meta;this._allLayouts=e.itemList(this.activeContext,ye.KeyLayout,this.zones()),this.nameToLayout.clear(),this._allLayouts.forEach(function(e){return t.nameToLayout.set(e.name,e)})}return this._allLayouts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutsByZones",{get:function(){if(F.isBlank(this._layoutsByZones)){var e=this.activeContext.meta;this._layoutsByZones=e.itemsByZones(this.activeContext,ye.KeyLayout,this.zones())}return this._layoutsByZones},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},set:function(e){this._layout=e,this._propertyMap=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"propertyMap",{get:function(){return F.isBlank(this._propertyMap)&&(this.activeContext.push(),this._propertyMap=this.activeContext.allProperties(),this.activeContext.pop()),this._propertyMap},enumerable:!0,configurable:!0}),e.prototype.label=function(){return this.activeContext.resolveValue(this.propertyMap.get(ye.KeyLabel))},e.prototype.labelForContext=function(e){var t=this.contextMap.get(e);return n.prototype.aProperties.call(this,t,ye.KeyLabel)},e.prototype.zones=function(){return ye.ZonesTLRMB},e.prototype.properties=function(e,t){return void 0===t&&(t=null),F.isPresent(this.activeContext)?this.activeContext.propertyForKey(e):t},e.prototype.debugString=function(e){var t=this.contextMap.get(e);return F.assert(F.isPresent(t),"Trying to retrive debugString on non-existing context"),t.debugString()},e.prototype.ngOnDestroy=function(){this.layoutContext=null,this.contextMap.clear(),this.contextMap=null},e}(Be),Te=function(i){function e(e,t,r){var n=i.call(this,e,t)||this;return n._metaContext=e,n.env=t,n.sanitizer=r,n}return l(e,i),e.prototype.styleString=function(e){this.contextMap.get(e);return null},e.prototype.classString=function(e){var t=this.contextMap.get(e);return F.isPresent(t)?t.propertyForKey("elementClass"):null},e.decorators=[{type:o.Component,args:[{template:'\x3c!--<b>MetaElementList: {{allLayouts}} </b>--\x3e\n\x3c!--<pre [innerHTML]="context.debugString()"></pre>--\x3e\n\n<ng-template ngFor [ngForOf]="allLayouts" let-cLayout>\n\n    <m-context [layout]="cLayout.name" (afterContextSet)="afterContextSet($event)"\n               (beforeContextSet)="beforeContextSet($event)">\n\n        \x3c!--<b>MetaElementList: layout {{cLayout.name}} </b>--\x3e\n        \x3c!--<pre [innerHTML]="debugString(cLayout.name)"></pre>--\x3e\n\n        <div class="ui-g ">\n            <div class="ui-g-12 ui-g-nopad" [ngClass]="classString(cLayout.name)"\n                 [ngStyle]="styleString(cLayout.name)"\n            >\n                <m-include-component></m-include-component>\n            </div>\n        </div>\n    </m-context>\n\n</ng-template>\n\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:xe},{type:F.Environment},{type:n.DomSanitizer}]},e}(Ee),Oe=function(n){function e(e,t){var r=n.call(this,t,e)||this;return r._metaContext=e,r.env=t,r.renderAs="buttons",r.defaultStyle="info",r.align="right",r._contextMap=new Map,r}return l(e,n),e.prototype.actionCategories=function(){var r=this;if(F.isBlank(this._actionsByCategory)||F.isBlank(this._actionsByName)){F.isPresent(this.filterActions)&&this.context.set("filterActions",this.filterActions);var e=this.context.meta;this.context.push(),this.menuModel=[],this._actionsByCategory=new Map,this._actionsByName=new Map,this.categories=e.actionsByCategory(this.context,this._actionsByCategory,ye.ActionZones),this.context.pop(),this._actionsByCategory.forEach(function(e,t){e.forEach(function(e){return r._actionsByName.set(e.name,e)})})}return this.categories},e.prototype.actions=function(e){return this._actionsByCategory.get(e.name)},e.prototype.actionClicked=function(e){var t=this._contextMap.get(e);t.meta.fireActionFromProps(this._actionsByName.get(e),t)},e.prototype.onAfterContextSet=function(e){var t=this._metaContext.activeContext().snapshot().hydrate(!1);this._contextMap.set(e,t),"menu"===this.renderAs&&this.populateMenu(e)},e.prototype.onContextChanged=function(e){console.log("Changed = "+e)},e.prototype.label=function(e){var t=this._contextMap.get(e);return n.prototype.aProperties.call(this,t,ye.KeyLabel)},e.prototype.isActionDisabled=function(e){var t=this._contextMap.get(e);return!F.isPresent(t)||!t.booleanPropertyForKey("enabled",!1)},e.prototype.alignRight=function(){return"right"===this.align},e.prototype.style=function(e){var t=this._contextMap.get(e),r=n.prototype.aProperties.call(this,t,"buttonStyle");return F.isPresent(r)?r:this.defaultStyle},e.prototype.populateMenu=function(t){var r=this,e=this.label(t),n=this.menuModel.findIndex(function(e){return e.actionName===t}),i={label:e,actionName:t,disabled:this.isActionDisabled(t),command:function(e){r.actionClicked(e.item.actionName)}};-1===n?this.menuModel.push(i):this.menuModel[n]=i},e.decorators=[{type:o.Component,args:[{template:'<span [class.u-flr]="alignRight()">\n    <m-context *ngIf="renderAs === \'buttons\'">\n        <ng-template ngFor [ngForOf]="actionCategories()" let-category>\n            <m-context [actionCategory]="category.name">\n                <ng-template ngFor [ngForOf]="actions(category)" let-action>\n                    <m-context [action]="action.name"\n                               (onContextChanged)="onContextChanged($event)"\n                               (afterContextSet)="onAfterContextSet($event)">\n                        <aw-button (action)="actionClicked(action.name)"\n                                   [style]="style(action.name)"\n                                   [disabled]="isActionDisabled(action.name)">\n\n                        {{ label(action.name) }}\n                        </aw-button>\n                    </m-context>\n                </ng-template>\n            </m-context>\n\n        </ng-template>\n    </m-context>\n\n    <m-context *ngIf="renderAs === \'links\'">\n        <ng-template ngFor [ngForOf]="actionCategories()" let-category>\n            <m-context [actionCategory]="category.name">\n                <ng-template ngFor [ngForOf]="actions(category)" let-action>\n                    <m-context [action]="action.name"\n                               (onContextChanged)="onContextChanged($event)"\n                               (afterContextSet)="onAfterContextSet($event)">\n                        <aw-button (action)="actionClicked(action.name)"\n                                   [style]="\'link\'"\n                                   [disabled]="isActionDisabled(action.name)">\n\n                        {{ label(action.name) }}\n                        </aw-button>\n                    </m-context>\n                </ng-template>\n            </m-context>\n\n        </ng-template>\n    </m-context>\n\n    <m-context *ngIf="renderAs === \'menu\'">\n        <ng-template ngFor [ngForOf]="actionCategories()" let-category>\n            <m-context [actionCategory]="category.name">\n\n                <ng-template ngFor [ngForOf]="actions(category)" let-action>\n                    <m-context [action]="action.name"\n                               (onContextChanged)="onContextChanged($event)"\n                               (afterContextSet)="onAfterContextSet($event)">\n                    </m-context>\n                </ng-template>\n            </m-context>\n        </ng-template>\n\n        <p-menu #menu popup="popup" [model]="menuModel"></p-menu>\n\n        \x3c!-- todo: extend button to support icons --\x3e\n        <aw-button (action)="menu.toggle($event)">\n            Actions\n        </aw-button>\n\n    </m-context>\n</span>\n\n\n\n\n\n',styles:[".m-action-list{width:100%}"]}]}],e.ctorParameters=function(){return[{type:xe},{type:F.Environment}]},e.propDecorators={renderAs:[{type:o.Input}],defaultStyle:[{type:o.Input}],align:[{type:o.Input}],filterActions:[{type:o.Input}]},e}(Be),je=function(n){function e(e,t){var r=n.call(this,e)||this;return r.env=e,r.activatedRoute=t,r}return l(e,n),e.prototype.ngOnInit=function(){n.prototype.ngOnInit.call(this);var e=this.activatedRoute.snapshot.params;F.isPresent(e)&&F.isPresent(e[ye.KeyModule])&&(this.module=e[ye.KeyModule])},e.prototype.hasModule=function(){return F.isPresent(this.module)},e.decorators=[{type:o.Component,args:[{selector:"m-home-page",template:'<div class="m-page" *ngIf="hasModule()">\n    <m-context [module]="module">\n        <m-include-component></m-include-component>\n    </m-context>\n\n</div>\n\n\n',styles:['.m-page{width:100%;margin:0 auto;padding:5px}.m-page:after{content:".";display:block;height:0;clear:both;visibility:hidden}.module-footer{clear:both}']}]}],e.ctorParameters=function(){return[{type:F.Environment},{type:r.ActivatedRoute}]},e.propDecorators={module:[{type:o.Input}]},e}(_.BaseComponent),Ne={small:"ui-md-3",medium:"ui-md-4",wide:"ui-md-6",large:"ui-md-12"},Ve=function(n){function t(e,t){var r=n.call(this,e,t)||this;return r.activeMenu=!1,r.dashboardName="",r}return l(t,n),t.prototype.ngOnInit=function(){n.prototype.ngOnInit.call(this),this.dashboardName=this.label()},t.prototype.toggleMenu=function(e){this.activeMenu=!this.activeMenu},t.prototype.zones=function(){return t.ZonesTB},t.prototype.topLayouts=function(){var e=this.layoutsByZones.get(ye.ZoneTop);return F.isPresent(e)?e:[]},t.prototype.portletWidth=function(e){var t=this.contextMap.get(e).propertyForKey("portletWidth");return F.isPresent(t)&&F.isPresent(Ne[t])?Ne[t]:"ui-md-4"},t.prototype.bottomLayouts=function(){var e=this.layoutsByZones.get(ye.ZoneBottom);return F.isPresent(e)?e:[]},t.prototype.zTocLayouts=function(){var e=this.layoutsByZones.get(t.ZoneToc);return F.isPresent(e)?e:[]},t.ZonesTB=[t.ZoneToc="zToc",ye.ZoneTop,ye.ZoneBottom],t.decorators=[{type:o.Component,args:[{template:'<div>\n    <span class="m-dashbord-name">{{dashboardName}} </span>\n    <span class="m-dashbord-lbl"> Dashboard</span>\n</div>\n\n\n<div id="m-toggle-bar" *ngIf="zTocLayouts().length > 0">\n    <aw-hyperlink (action)="toggleMenu($event)" [size]="\'large\'">\n        <i class="fa fa-bars"></i>\n    </aw-hyperlink>\n</div>\n<div id="m-toc" [class.active]="activeMenu" *ngIf="zTocLayouts().length > 0">\n    <div class="ui-g ">\n        <m-context *ngFor="let layout of zTocLayouts()"\n                   [layout]="layout.name" (afterContextSet)="afterContextSet($event)"\n                   (beforeContextSet)="beforeContextSet($event)">\n\n            <div class="ui-g-12 " [ngClass]="portletWidth(layout.name)">\n                <p-panel [header]="labelForContext(layout.name)">\n                    <m-include-component></m-include-component>\n                </p-panel>\n            </div>\n        </m-context>\n    </div>\n</div>\n\n<div id="m-content">\n    <div class="ui-g m-dashboard">\n        \x3c!-- top --\x3e\n        <div class="ui-g-12">\n            <div class="ui-g ">\n                <m-context *ngFor="let layout of topLayouts()"\n                           [layout]="layout.name" (afterContextSet)="afterContextSet($event)"\n                           (beforeContextSet)="beforeContextSet($event)">\n\n                    <div class="ui-g-12 " [ngClass]="portletWidth(layout.name)">\n                        <p-panel [header]="labelForContext(layout.name)" [toggleable]="false">\n                            <m-include-component></m-include-component>\n                        </p-panel>\n                    </div>\n                </m-context>\n            </div>\n        </div>\n\n        \x3c!-- bottom --\x3e\n        <div class="ui-g-12">\n            <div class="ui-g ">\n                <m-context *ngFor="let layout of bottomLayouts()"\n                           [layout]="layout.name" (afterContextSet)="afterContextSet($event)"\n                           (beforeContextSet)="beforeContextSet($event)">\n\n                    <div class="ui-g-12 " [ngClass]="portletWidth(layout.name)">\n                        <p-panel [header]="labelForContext(layout.name)" [toggleable]="false">\n                            <m-include-component></m-include-component>\n                        </p-panel>\n                    </div>\n                </m-context>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n',styles:["#m-toc{position:relative;float:left;z-index:99;width:15em;padding:.5em;box-shadow:6px 0 10px -4px rgba(0,0,0,.3)}#m-content{float:left;padding-top:1em;padding-left:1em;height:auto}#m-toggle-bar{box-sizing:border-box;border-bottom:1px solid #dde3e6;overflow:hidden;display:none;border-radius:5px;padding:.5em;width:2em;height:2.3em}#m-toggle-bar:focus,#m-toggle-bar:hover{background-color:#ececec}#m-toggle-bar:after{content:'';display:block;clear:both}.m-dashbord-name{font-weight:600}.ui-g{display:block}@media screen and (max-width:64em){#m-toc{display:none;overflow-y:auto;z-index:999}#m-toc.active{display:block}#m-toggle-bar{display:block;position:relative;z-index:1000;margin-right:1em}}"]}]}],t.ctorParameters=function(){return[{type:xe},{type:F.Environment}]},t}(Ee),We=function(n){function e(e,t){var r=n.call(this,e,t)||this;return r._metaContext=e,r.env=t,r.sectionOperations={},r.onCompleteSubscriptions={},r}return l(e,n),e.prototype.ngOnInit=function(){var t=this;n.prototype.ngOnInit.call(this),this.allLayouts.forEach(function(e){t.sectionOperations[e.name]="view"})},e.prototype.ngDoCheck=function(){n.prototype.ngDoCheck.call(this)},e.prototype.ngAfterViewInit=function(){this.sections=function r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}(this.viewSections.toArray())},e.prototype.onAction=function(e,t,r,n){var i=this,o=this.sections[t];this.env.hasValue("parent-cnx")&&this.env.getValue("parent-cnx").onAction.emit(new Me(o,e,r,n));"onEdit"===e&&o.editState&&"default"===o.editMode&&(this.sectionOperations[r]="edit",F.isBlank(this.onCompleteSubscriptions[r])&&(o.onEditingComplete.subscribe(function(e){return i.sectionOperations[r]="view"}),this.onCompleteSubscriptions[r]=o))},e.prototype.sectionProp=function(e,t,r){var n=this.contextMap.get(t);return F.isPresent(n)&&F.isPresent(n.propertyForKey(e))?n.propertyForKey(e):r},e.prototype.ngOnDestroy=function(){var t=this;n.prototype.ngOnDestroy.call(this),this.allLayouts.forEach(function(e){F.isPresent(t.onCompleteSubscriptions[e.name])&&t.onCompleteSubscriptions[e.name].onEditingComplete.unsubscribe()})},e.decorators=[{type:o.Component,args:[{template:'<div class="meta-sections">\n\n    <m-context *ngFor="let layout of allLayouts; let i = index" [layout]="layout.name"\n               [operation]="sectionOperations[layout.name]"\n               (afterContextSet)="afterContextSet($event)"\n               (beforeContextSet)="beforeContextSet($event)">\n\n        <aw-section [title]="sectionProp(\'title\', layout.name, null)"\n                    [description]="sectionProp(\'description\', layout.name, null)"\n                    [opened]="sectionProp(\'opened\', layout.name, true)"\n                    [actionIcon]="sectionProp(\'actionIcon\', layout.name, \'icon-edit\')"\n                    [editable]="sectionProp(\'canEdit\', layout.name, false)"\n                    [editMode]="sectionProp(\'editMode\', layout.name, \'default\')"\n                    [disableClose]="sectionProp(\'disableClose\', layout.name, false)"\n                    (onEdit)="onAction(\'onEdit\', i, layout.name, $event)"\n                    (onSaveAction)="onAction(\'onSaveAction\', i, layout.name, $event)"\n                    (onCancelAction)="onAction(\'onCancelAction\', i, layout.name, $event)">\n\n            <m-include-component></m-include-component>\n        </aw-section>\n\n    </m-context>\n</div>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:xe},{type:F.Environment}]},e.propDecorators={viewSections:[{type:o.ViewChildren,args:[_.SectionComponent]}]},e}(Ee),ze=function(r){function e(e){var t=r.call(this,e)||this;return t.env=e,t.operation="view",t.layout="Inspect",t}return l(e,r),e.prototype.ngOnInit=function(){if(F.isBlank(this.object)||!F.isStringMap(this.object))throw new Error("Cannot render primitive values as object details!")},e.decorators=[{type:o.Component,args:[{selector:"m-content-detail",template:'<span class="w-obj-detail-lbl" *ngIf="label">{{label}}</span>\n<m-context [pushNewContext]="true" [object]="object" [operation]="operation"\n           [layout]="layout" group="ObjectDetail">\n\n    <div class="w-object-detail">\n        <m-include-component></m-include-component>\n    </div>\n\n</m-context>\n',styles:[".w-obj-detail-lbl{color:#aeaeae;font-weight:700;border-bottom:1px solid #e9e9e9}"]}]}],e.ctorParameters=function(){return[{type:F.Environment}]},e.propDecorators={object:[{type:o.Input}],operation:[{type:o.Input}],layout:[{type:o.Input}],label:[{type:o.Input}]},e}(_.BaseComponent),Ge=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{declarations:[Ke,Fe,Re,Le,Ae,Ie,Te,Oe,je,Ve,We,ze],imports:[t.CommonModule,i.FormsModule,i.ReactiveFormsModule,Se,F.AribaCoreModule,_.AribaComponentsModule],entryComponents:[Fe,Re,Le,Ae,Ie,Ie,Te,Oe,je,Ve,We,ze],exports:[Ke,Fe,Re,Le,Ae,Ie,Ie,Te,Oe,je,Ve,We,i.ReactiveFormsModule,i.FormsModule,F.AribaCoreModule,_.AribaComponentsModule,ze],providers:[]}]}],e}(),Ze=Object.freeze({ACTIVE_CNTX:De,MetaContextComponent:xe,MetaUIActionEvent:Me,AWMetaLayoutModule:Ge,MetaContentPageComponent:Ie,MetaFormComponent:Fe,MetaFormRowComponent:Le,MetaFormTableComponent:Re,NoMetaComponent:Ae,MetaIncludeComponentDirective:Ke,MetaBaseComponent:Be,MetaElementListComponent:Te,MetaActionListComponent:Oe,MetaHomePageComponent:je,MetaDashboardLayoutComponent:Ve,MetaSectionsComponent:We,MetaObjectDetailComponent:ze}),Ue=[{path:"context",component:Ie}],qe=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[r.RouterModule.forChild(Ue)],exports:[r.RouterModule],providers:[]}]}],e}(),He=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[t.CommonModule,qe,Se,Ge],exports:[Se,Ge],providers:[{provide:o.APP_INITIALIZER,useFactory:$e,deps:[o.Injector],multi:!0}]}]}],e.ctorParameters=function(){return[]},e}();function $e(e){var t=function(r){return new Promise(function(e){var t=ye.getInstance();t.injector=r,t.registerLoader(new we),t.loadDefaultRuleFiles(Ze),e(!0)})};return t.bind(t,e)}e.Activation=S,e.Assignment=K,e.AssignmentSnapshot=A,e.Context=M,e.DeferredAssignment=w,e.ObjectMetaContext=E,e.PropertyAccessor=L,e.Snapshot=I,e.StaticRec=R,e.UIContext=T,e.ItemProperties=oe,e.Match=b,e.MatchResult=u,e.MatchWithUnion=p,e.UnionMatchResult=y,e.Meta=V,e.KeyValueCount=W,e.PropertyManager=z,e.OverrideValue=G,e.KeyData=Z,e.PropertyMap=U,e.PropertyMergerDynamic=q,e.PropertyMerger_Overwrite=H,e.PropertyMerger_List=$,e.PropertyMergerDeclareList=J,e.PropertyMergerDeclareListForTrait=X,e.PropertyMerger_And=Q,e.PropertyMerger_Valid=Y,e.RuleSet=ee,e.ValueMatches=te,e.MultiMatchValue=re,e.KeyValueTransformer_KeyPresent=ne,e.isPropertyMapAwaking=ie,e.NestedMap=h,e.FieldTypeIntrospectionMetaProvider=le,e.IntrospectionMetaProvider=se,e.ObjectMeta=ae,e.ObjectMetaPropertyMap=ce,e.OMPropertyMerger_Valid=pe,e.SystemPersistenceRules=_e,e.DynamicPropertyValue=v,e.StaticallyResolvable=f,e.StaticDynamicWrapper=k,e.StaticallyResolvableWrapper=m,e.ContextFieldPath=g,e.isDynamicSettable=D,e.Expr=C,e.DeferredOperationChain=P,e.ValueConverter=x,e.Rule=j,e.RuleWrapper=N,e.Selector=O,e.RuleLoaderService=we,e.LocalizedString=de,e.UIMeta=ye,e.SystemRules=ue,e.ModuleInfo=he,e.AWMetaCoreModule=Se,e.MetaUIActionEvent=Me,e.MetaContentPageComponent=Ie,e.MetaFormComponent=Fe,e.MetaFormRowComponent=Le,e.MetaFormTableComponent=Re,e.NoMetaComponent=Ae,e.MetaIncludeComponentDirective=Ke,e.MetaBaseComponent=Be,e.MetaElementListComponent=Te,e.MetaHomePageComponent=je,e.AWMetaLayoutModule=Ge,e.MetaSectionsComponent=We,e.MetaObjectDetailComponent=ze,e.MetaContextComponent=xe,e.AribaMetaUIModule=He,e.initMetaUI=$e,e.AribaMetaUIRoutingModule=qe,e.a=Oe,e.b=Ve,e.c=Ee,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=aribaui-metaui.umd.min.js.map